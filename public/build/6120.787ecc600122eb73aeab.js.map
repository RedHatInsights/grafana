{"version":3,"file":"6120.787ecc600122eb73aeab.js","mappings":"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","sources":["webpack://grafana/./public/app/features/alerting/unified/components/AnnotationDetailsField.tsx","webpack://grafana/./public/app/features/alerting/unified/components/DetailsField.tsx","webpack://grafana/./public/app/features/alerting/unified/components/DynamicTable.tsx","webpack://grafana/./public/app/features/alerting/unified/components/Well.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/StateHistory.tsx","webpack://grafana/./public/app/features/alerting/unified/hooks/useManagedAlertStateHistory.ts","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleDetailsActionButtons.tsx","webpack://grafana/./public/app/features/alerting/unified/hooks/useStateHistoryModal.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleDetailsAnnotations.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleDetailsDataSources.tsx","webpack://grafana/./public/app/features/alerting/unified/components/Expression.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleDetailsExpression.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/AlertInstanceDetails.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/AlertInstancesTable.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleDetailsMatchingInstances.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleHealth.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleState.tsx","webpack://grafana/./public/app/features/alerting/unified/hooks/useCombinedRuleNamespaces.ts","webpack://grafana/./public/app/features/alerting/unified/hooks/useFolder.ts","webpack://grafana/./public/app/features/alerting/unified/hooks/useIsRuleEditable.ts"],"sourcesContent":["import React, { FC } from 'react';\nimport { Well } from './Well';\nimport { GrafanaTheme } from '@grafana/data';\nimport { css } from '@emotion/css';\nimport { Tooltip, useStyles } from '@grafana/ui';\nimport { DetailsField } from './DetailsField';\nimport { Annotation, annotationLabels } from '../utils/constants';\n\nconst wellableAnnotationKeys = ['message', 'description'];\n\ninterface Props {\n  annotationKey: string;\n  value: string;\n}\n\nexport const AnnotationDetailsField: FC<Props> = ({ annotationKey, value }) => {\n  const label = annotationLabels[annotationKey as Annotation] ? (\n    <Tooltip content={annotationKey} placement=\"top\" theme=\"info\">\n      <span>{annotationLabels[annotationKey as Annotation]}</span>\n    </Tooltip>\n  ) : (\n    annotationKey\n  );\n\n  return (\n    <DetailsField label={label} horizontal={true}>\n      <AnnotationValue annotationKey={annotationKey} value={value} />\n    </DetailsField>\n  );\n};\n\nconst AnnotationValue: FC<Props> = ({ annotationKey, value }) => {\n  const styles = useStyles(getStyles);\n  if (wellableAnnotationKeys.includes(annotationKey)) {\n    return <Well>{value}</Well>;\n  } else if (value && value.startsWith('http')) {\n    return (\n      <a href={value} target=\"__blank\" className={styles.link}>\n        {value}\n      </a>\n    );\n  }\n  return <>{value}</>;\n};\n\nexport const getStyles = (theme: GrafanaTheme) => ({\n  well: css`\n    word-break: break-all;\n  `,\n  link: css`\n    word-break: break-all;\n    color: ${theme.colors.textBlue};\n  `,\n});\n","import React, { FC } from 'react';\nimport { css, cx } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\ninterface Props {\n  label: React.ReactNode;\n  className?: string;\n  horizontal?: boolean;\n}\n\nexport const DetailsField: FC<Props> = ({ className, label, horizontal, children }) => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={cx(className, styles.field, horizontal ? styles.fieldHorizontal : styles.fieldVertical)}>\n      <div>{label}</div>\n      <div>{children}</div>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  fieldHorizontal: css`\n    flex-direction: row;\n    ${theme.breakpoints.down('md')} {\n      flex-direction: column;\n    }\n  `,\n  fieldVertical: css`\n    flex-direction: column;\n  `,\n  field: css`\n    display: flex;\n    margin: ${theme.spacing(2)} 0;\n\n    & > div:first-child {\n      width: 110px;\n      padding-right: ${theme.spacing(1)};\n      font-size: ${theme.typography.size.sm};\n      font-weight: ${theme.typography.fontWeightBold};\n      line-height: 1.8;\n    }\n    & > div:nth-child(2) {\n      flex: 1;\n      color: ${theme.colors.text.secondary};\n    }\n  `,\n});\n","import React, { ReactNode, useState } from 'react';\nimport { css, cx } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { IconButton, useStyles2 } from '@grafana/ui';\n\nexport interface DynamicTableColumnProps<T = unknown> {\n  id: string | number;\n  label: string;\n\n  renderCell: (item: DynamicTableItemProps<T>, index: number) => ReactNode;\n  size?: number | string;\n}\n\nexport interface DynamicTableItemProps<T = unknown> {\n  id: string | number;\n  data: T;\n  renderExpandedContent?: () => ReactNode;\n}\n\nexport interface DynamicTableProps<T = unknown> {\n  cols: Array<DynamicTableColumnProps<T>>;\n  items: Array<DynamicTableItemProps<T>>;\n\n  isExpandable?: boolean;\n\n  // provide these to manually control expanded status\n  onCollapse?: (item: DynamicTableItemProps<T>) => void;\n  onExpand?: (item: DynamicTableItemProps<T>) => void;\n  isExpanded?: (item: DynamicTableItemProps<T>) => boolean;\n\n  renderExpandedContent?: (\n    item: DynamicTableItemProps<T>,\n    index: number,\n    items: Array<DynamicTableItemProps<T>>\n  ) => ReactNode;\n  testIdGenerator?: (item: DynamicTableItemProps<T>, index: number) => string;\n  renderPrefixHeader?: () => ReactNode;\n  renderPrefixCell?: (\n    item: DynamicTableItemProps<T>,\n    index: number,\n    items: Array<DynamicTableItemProps<T>>\n  ) => ReactNode;\n}\n\nexport const DynamicTable = <T extends object>({\n  cols,\n  items,\n  isExpandable = false,\n  onCollapse,\n  onExpand,\n  isExpanded,\n  renderExpandedContent,\n  testIdGenerator,\n\n  // render a cell BEFORE expand icon for header/ each row.\n  // currently use by RuleList to render guidelines\n  renderPrefixCell,\n  renderPrefixHeader,\n}: DynamicTableProps<T>) => {\n  if ((onCollapse || onExpand || isExpanded) && !(onCollapse && onExpand && isExpanded)) {\n    throw new Error('either all of onCollapse, onExpand, isExpanded must be provided, or none');\n  }\n  if ((isExpandable || renderExpandedContent) && !(isExpandable && renderExpandedContent)) {\n    throw new Error('either both isExpanded and renderExpandedContent must be provided, or neither');\n  }\n  const styles = useStyles2(getStyles(cols, isExpandable, !!renderPrefixHeader));\n\n  const [expandedIds, setExpandedIds] = useState<Array<DynamicTableItemProps['id']>>([]);\n\n  const toggleExpanded = (item: DynamicTableItemProps<T>) => {\n    if (isExpanded && onCollapse && onExpand) {\n      isExpanded(item) ? onCollapse(item) : onExpand(item);\n    } else {\n      setExpandedIds(\n        expandedIds.includes(item.id) ? expandedIds.filter((itemId) => itemId !== item.id) : [...expandedIds, item.id]\n      );\n    }\n  };\n  return (\n    <div className={styles.container} data-testid=\"dynamic-table\">\n      <div className={styles.row} data-testid=\"header\">\n        {renderPrefixHeader && renderPrefixHeader()}\n        {isExpandable && <div className={styles.cell} />}\n        {cols.map((col) => (\n          <div className={styles.cell} key={col.id}>\n            {col.label}\n          </div>\n        ))}\n      </div>\n\n      {items.map((item, index) => {\n        const isItemExpanded = isExpanded ? isExpanded(item) : expandedIds.includes(item.id);\n        return (\n          <div className={styles.row} key={item.id} data-testid={testIdGenerator?.(item, index) ?? 'row'}>\n            {renderPrefixCell && renderPrefixCell(item, index, items)}\n            {isExpandable && (\n              <div className={cx(styles.cell, styles.expandCell)}>\n                <IconButton\n                  aria-label={`${isItemExpanded ? 'Collapse' : 'Expand'} row`}\n                  size=\"xl\"\n                  data-testid=\"collapse-toggle\"\n                  className={styles.expandButton}\n                  name={isItemExpanded ? 'angle-down' : 'angle-right'}\n                  onClick={() => toggleExpanded(item)}\n                  type=\"button\"\n                />\n              </div>\n            )}\n            {cols.map((col) => (\n              <div className={cx(styles.cell, styles.bodyCell)} data-column={col.label} key={`${item.id}-${col.id}`}>\n                {col.renderCell(item, index)}\n              </div>\n            ))}\n            {isItemExpanded && renderExpandedContent && (\n              <div className={styles.expandedContentRow} data-testid=\"expanded-content\">\n                {renderExpandedContent(item, index, items)}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nconst getStyles = <T extends unknown>(\n  cols: Array<DynamicTableColumnProps<T>>,\n  isExpandable: boolean,\n  hasPrefixCell: boolean\n) => {\n  const sizes = cols.map((col) => {\n    if (!col.size) {\n      return 'auto';\n    }\n\n    if (typeof col.size === 'number') {\n      return `${col.size}fr`;\n    }\n\n    return col.size;\n  });\n\n  if (isExpandable) {\n    sizes.unshift('calc(1em + 16px)');\n  }\n\n  if (hasPrefixCell) {\n    sizes.unshift('0');\n  }\n\n  return (theme: GrafanaTheme2) => ({\n    container: css`\n      border: 1px solid ${theme.colors.border.strong};\n      border-radius: 2px;\n      color: ${theme.colors.text.secondary};\n    `,\n    row: css`\n      display: grid;\n      grid-template-columns: ${sizes.join(' ')};\n      grid-template-rows: 1fr auto;\n\n      &:nth-child(2n + 1) {\n        background-color: ${theme.colors.background.secondary};\n      }\n\n      &:nth-child(2n) {\n        background-color: ${theme.colors.background.primary};\n      }\n\n      ${theme.breakpoints.down('sm')} {\n        grid-template-columns: auto 1fr;\n        grid-template-areas: 'left right';\n        padding: 0 ${theme.spacing(0.5)};\n\n        &:first-child {\n          display: none;\n        }\n\n        ${hasPrefixCell\n          ? `\n            & > *:first-child {\n              display: none;\n            }\n          `\n          : ''}\n      }\n    `,\n    cell: css`\n      align-items: center;\n      padding: ${theme.spacing(1)};\n\n      ${theme.breakpoints.down('sm')} {\n        padding: ${theme.spacing(1)} 0;\n        grid-template-columns: 1fr;\n      }\n    `,\n    bodyCell: css`\n      overflow: hidden;\n      word-break: break-all;\n      ${theme.breakpoints.down('sm')} {\n        grid-column-end: right;\n        grid-column-start: right;\n\n        &::before {\n          content: attr(data-column);\n          display: block;\n          color: ${theme.colors.text.primary};\n        }\n      }\n    `,\n    expandCell: css`\n      justify-content: center;\n\n      ${theme.breakpoints.down('sm')} {\n        align-items: start;\n        grid-area: left;\n      }\n    `,\n    expandedContentRow: css`\n      grid-column-end: ${sizes.length + 1};\n      grid-column-start: ${hasPrefixCell ? 3 : 2};\n      grid-row: 2;\n      padding: 0 ${theme.spacing(3)} 0 ${theme.spacing(1)};\n      position: relative;\n\n      ${theme.breakpoints.down('sm')} {\n        grid-column-start: 2;\n        border-top: 1px solid ${theme.colors.border.strong};\n        grid-row: auto;\n        padding: ${theme.spacing(1)} 0 0 0;\n      }\n    `,\n    expandButton: css`\n      margin-right: 0;\n      display: block;\n    `,\n  });\n};\n","import React, { FC } from 'react';\nimport { useStyles } from '@grafana/ui';\nimport { cx, css } from '@emotion/css';\nimport { GrafanaTheme } from '@grafana/data';\n\ntype Props = React.HTMLAttributes<HTMLDivElement>;\n\nexport const Well: FC<Props> = ({ children, className }) => {\n  const styles = useStyles(getStyles);\n  return <div className={cx(styles.wrapper, className)}>{children}</div>;\n};\nexport const getStyles = (theme: GrafanaTheme) => ({\n  wrapper: css`\n    background-color: ${theme.colors.panelBg};\n    border: solid 1px ${theme.colors.formInputBorder};\n    border-radius: ${theme.border.radius.sm};\n    padding: ${theme.spacing.xs} ${theme.spacing.sm};\n    font-family: ${theme.typography.fontFamily.monospace};\n  `,\n});\n","import React, { FC } from 'react';\nimport { uniqueId } from 'lodash';\nimport { AlertState, dateTimeFormat, GrafanaTheme } from '@grafana/data';\nimport { Alert, LoadingPlaceholder, useStyles } from '@grafana/ui';\nimport { css } from '@emotion/css';\nimport { StateHistoryItem, StateHistoryItemData } from 'app/types/unified-alerting';\nimport { DynamicTable, DynamicTableColumnProps, DynamicTableItemProps } from '../DynamicTable';\nimport { AlertStateTag } from './AlertStateTag';\nimport { useManagedAlertStateHistory } from '../../hooks/useManagedAlertStateHistory';\nimport { AlertLabel } from '../AlertLabel';\nimport { GrafanaAlertState, PromAlertingRuleState } from 'app/types/unified-alerting-dto';\n\ntype StateHistoryRowItem = {\n  id: string;\n  state: PromAlertingRuleState | GrafanaAlertState | AlertState;\n  text?: string;\n  data?: StateHistoryItemData;\n  timestamp?: number;\n};\n\ntype StateHistoryRow = DynamicTableItemProps<StateHistoryRowItem>;\n\ninterface RuleStateHistoryProps {\n  alertId: string;\n}\n\nconst StateHistory: FC<RuleStateHistoryProps> = ({ alertId }) => {\n  const { loading, error, result = [] } = useManagedAlertStateHistory(alertId);\n\n  if (loading && !error) {\n    return <LoadingPlaceholder text={'Loading history...'} />;\n  }\n\n  if (error && !loading) {\n    return <Alert title={'Failed to fetch alert state history'}>{error.message}</Alert>;\n  }\n\n  const columns: Array<DynamicTableColumnProps<StateHistoryRowItem>> = [\n    { id: 'state', label: 'State', size: 'max-content', renderCell: renderStateCell },\n    { id: 'value', label: '', size: 'auto', renderCell: renderValueCell },\n    { id: 'timestamp', label: 'Time', size: 'max-content', renderCell: renderTimestampCell },\n  ];\n\n  const items: StateHistoryRow[] = result\n    .reduce((acc: StateHistoryRowItem[], item, index) => {\n      acc.push({\n        id: String(item.id),\n        state: item.newState,\n        text: item.text,\n        data: item.data,\n        timestamp: item.updated,\n      });\n\n      // if the preceding state is not the same, create a separate state entry – this likely means the state was reset\n      if (!hasMatchingPrecedingState(index, result)) {\n        acc.push({ id: uniqueId(), state: item.prevState });\n      }\n\n      return acc;\n    }, [])\n    .map((historyItem) => ({\n      id: historyItem.id,\n      data: historyItem,\n    }));\n\n  return <DynamicTable cols={columns} items={items} />;\n};\n\nfunction renderValueCell(item: StateHistoryRow) {\n  const matches = item.data.data?.evalMatches ?? [];\n\n  return (\n    <>\n      {item.data.text}\n      <LabelsWrapper>\n        {matches.map((match) => (\n          <AlertLabel key={match.metric} labelKey={match.metric} value={String(match.value)} />\n        ))}\n      </LabelsWrapper>\n    </>\n  );\n}\n\nfunction renderStateCell(item: StateHistoryRow) {\n  return <AlertStateTag state={item.data.state} />;\n}\n\nfunction renderTimestampCell(item: StateHistoryRow) {\n  return (\n    <div className={TimestampStyle}>{item.data.timestamp && <span>{dateTimeFormat(item.data.timestamp)}</span>}</div>\n  );\n}\n\nconst LabelsWrapper: FC<{}> = ({ children }) => {\n  const { wrapper } = useStyles(getStyles);\n  return <div className={wrapper}>{children}</div>;\n};\n\nconst TimestampStyle = css`\n  display: flex;\n  align-items: flex-end;\n  flex-direction: column;\n`;\n\nconst getStyles = (theme: GrafanaTheme) => ({\n  wrapper: css`\n    & > * {\n      margin-right: ${theme.spacing.xs};\n    }\n  `,\n});\n\n// this function will figure out if a given historyItem has a preceding historyItem where the states match - in other words\n// the newState of the previous historyItem is the same as the prevState of the current historyItem\nfunction hasMatchingPrecedingState(index: number, items: StateHistoryItem[]): boolean {\n  const currentHistoryItem = items[index];\n  const previousHistoryItem = items[index + 1];\n\n  if (!previousHistoryItem) {\n    return false;\n  }\n\n  return previousHistoryItem.newState === currentHistoryItem.prevState;\n}\n\nexport { StateHistory };\n","import { StateHistoryItem } from 'app/types/unified-alerting';\nimport { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { fetchGrafanaAnnotationsAction } from '../state/actions';\nimport { AsyncRequestState } from '../utils/redux';\nimport { useUnifiedAlertingSelector } from './useUnifiedAlertingSelector';\n\nexport function useManagedAlertStateHistory(alertId: string) {\n  const dispatch = useDispatch();\n  const history = useUnifiedAlertingSelector<AsyncRequestState<StateHistoryItem[]>>(\n    (state) => state.managedAlertStateHistory\n  );\n\n  useEffect(() => {\n    dispatch(fetchGrafanaAnnotationsAction(alertId));\n  }, [dispatch, alertId]);\n\n  return history;\n}\n","import React, { FC, Fragment, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { css } from '@emotion/css';\nimport { AppEvents, GrafanaTheme2, urlUtil } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { Button, ConfirmModal, ClipboardButton, HorizontalGroup, LinkButton, useStyles2 } from '@grafana/ui';\nimport { contextSrv } from 'app/core/services/context_srv';\nimport { appEvents } from 'app/core/core';\nimport { useIsRuleEditable } from '../../hooks/useIsRuleEditable';\nimport { Annotation } from '../../utils/constants';\nimport { getRulesSourceName, isCloudRulesSource, isGrafanaRulesSource } from '../../utils/datasource';\nimport { createExploreLink, createViewLink, makeRuleBasedSilenceLink } from '../../utils/misc';\nimport * as ruleId from '../../utils/rule-id';\nimport { deleteRuleAction } from '../../state/actions';\nimport { CombinedRule, RulesSource } from 'app/types/unified-alerting';\nimport { getAlertmanagerByUid } from '../../utils/alertmanager';\nimport { useStateHistoryModal } from '../../hooks/useStateHistoryModal';\nimport { RulerGrafanaRuleDTO, RulerRuleDTO } from 'app/types/unified-alerting-dto';\n\ninterface Props {\n  rule: CombinedRule;\n  rulesSource: RulesSource;\n}\n\nexport const RuleDetailsActionButtons: FC<Props> = ({ rule, rulesSource }) => {\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const style = useStyles2(getStyles);\n  const { namespace, group, rulerRule } = rule;\n  const [ruleToDelete, setRuleToDelete] = useState<CombinedRule>();\n  const alertId = isGrafanaRulerRule(rule.rulerRule) ? rule.rulerRule.grafana_alert.id ?? '' : '';\n  const { StateHistoryModal, showStateHistoryModal } = useStateHistoryModal(alertId);\n\n  const alertmanagerSourceName = isGrafanaRulesSource(rulesSource)\n    ? rulesSource\n    : getAlertmanagerByUid(rulesSource.jsonData.alertmanagerUid)?.name;\n\n  const leftButtons: JSX.Element[] = [];\n  const rightButtons: JSX.Element[] = [];\n\n  const { isEditable } = useIsRuleEditable(getRulesSourceName(rulesSource), rulerRule);\n  const returnTo = location.pathname + location.search;\n  const isViewMode = inViewMode(location.pathname);\n\n  const deleteRule = () => {\n    if (ruleToDelete && ruleToDelete.rulerRule) {\n      const identifier = ruleId.fromRulerRule(\n        getRulesSourceName(ruleToDelete.namespace.rulesSource),\n        ruleToDelete.namespace.name,\n        ruleToDelete.group.name,\n        ruleToDelete.rulerRule\n      );\n\n      dispatch(deleteRuleAction(identifier, { navigateTo: isViewMode ? '/alerting/list' : undefined }));\n      setRuleToDelete(undefined);\n    }\n  };\n\n  const buildShareUrl = () => {\n    if (isCloudRulesSource(rulesSource)) {\n      const ruleUrl = `${encodeURIComponent(rulesSource.name)}/${encodeURIComponent(rule.name)}`;\n      return `${config.appUrl}${config.appSubUrl}/alerting/${ruleUrl}/find`;\n    }\n\n    return window.location.href.split('?')[0];\n  };\n\n  // explore does not support grafana rule queries atm\n  if (isCloudRulesSource(rulesSource) && contextSrv.isEditor) {\n    leftButtons.push(\n      <LinkButton\n        className={style.button}\n        size=\"xs\"\n        key=\"explore\"\n        variant=\"primary\"\n        icon=\"chart-line\"\n        target=\"__blank\"\n        href={createExploreLink(rulesSource.name, rule.query)}\n      >\n        See graph\n      </LinkButton>\n    );\n  }\n  if (rule.annotations[Annotation.runbookURL]) {\n    leftButtons.push(\n      <LinkButton\n        className={style.button}\n        size=\"xs\"\n        key=\"runbook\"\n        variant=\"primary\"\n        icon=\"book\"\n        target=\"__blank\"\n        href={rule.annotations[Annotation.runbookURL]}\n      >\n        View runbook\n      </LinkButton>\n    );\n  }\n  if (rule.annotations[Annotation.dashboardUID]) {\n    const dashboardUID = rule.annotations[Annotation.dashboardUID];\n    if (dashboardUID) {\n      leftButtons.push(\n        <LinkButton\n          className={style.button}\n          size=\"xs\"\n          key=\"dashboard\"\n          variant=\"primary\"\n          icon=\"apps\"\n          target=\"__blank\"\n          href={`d/${encodeURIComponent(dashboardUID)}`}\n        >\n          Go to dashboard\n        </LinkButton>\n      );\n      const panelId = rule.annotations[Annotation.panelID];\n      if (panelId) {\n        leftButtons.push(\n          <LinkButton\n            className={style.button}\n            size=\"xs\"\n            key=\"panel\"\n            variant=\"primary\"\n            icon=\"apps\"\n            target=\"__blank\"\n            href={`d/${encodeURIComponent(dashboardUID)}?viewPanel=${encodeURIComponent(panelId)}`}\n          >\n            Go to panel\n          </LinkButton>\n        );\n      }\n    }\n  }\n\n  if (alertmanagerSourceName) {\n    leftButtons.push(\n      <LinkButton\n        className={style.button}\n        size=\"xs\"\n        key=\"silence\"\n        icon=\"bell-slash\"\n        target=\"__blank\"\n        href={makeRuleBasedSilenceLink(alertmanagerSourceName, rule)}\n      >\n        Silence\n      </LinkButton>\n    );\n  }\n\n  if (alertId) {\n    leftButtons.push(\n      <Fragment key=\"history\">\n        <Button className={style.button} size=\"xs\" icon=\"history\" onClick={() => showStateHistoryModal()}>\n          Show state history\n        </Button>\n        {StateHistoryModal}\n      </Fragment>\n    );\n  }\n\n  if (!isViewMode) {\n    rightButtons.push(\n      <LinkButton\n        className={style.button}\n        size=\"xs\"\n        key=\"view\"\n        variant=\"secondary\"\n        icon=\"eye\"\n        href={createViewLink(rulesSource, rule, returnTo)}\n      >\n        View\n      </LinkButton>\n    );\n  }\n\n  if (isEditable && rulerRule) {\n    const sourceName = getRulesSourceName(rulesSource);\n    const identifier = ruleId.fromRulerRule(sourceName, namespace.name, group.name, rulerRule);\n\n    const editURL = urlUtil.renderUrl(\n      `${config.appSubUrl}/alerting/${encodeURIComponent(ruleId.stringifyIdentifier(identifier))}/edit`,\n      {\n        returnTo,\n      }\n    );\n\n    if (isViewMode) {\n      rightButtons.push(\n        <ClipboardButton\n          key=\"copy\"\n          onClipboardCopy={() => {\n            appEvents.emit(AppEvents.alertSuccess, ['URL copied!']);\n          }}\n          onClipboardError={(e) => {\n            appEvents.emit(AppEvents.alertError, ['Error while copying URL', e.text]);\n          }}\n          className={style.button}\n          size=\"sm\"\n          getText={buildShareUrl}\n        >\n          Copy link to rule\n        </ClipboardButton>\n      );\n    }\n\n    rightButtons.push(\n      <LinkButton className={style.button} size=\"xs\" key=\"edit\" variant=\"secondary\" icon=\"pen\" href={editURL}>\n        Edit\n      </LinkButton>,\n      <Button\n        className={style.button}\n        size=\"xs\"\n        type=\"button\"\n        key=\"delete\"\n        variant=\"secondary\"\n        icon=\"trash-alt\"\n        onClick={() => setRuleToDelete(rule)}\n      >\n        Delete\n      </Button>\n    );\n  }\n  if (leftButtons.length || rightButtons.length) {\n    return (\n      <>\n        <div className={style.wrapper}>\n          <HorizontalGroup width=\"auto\">{leftButtons.length ? leftButtons : <div />}</HorizontalGroup>\n          <HorizontalGroup width=\"auto\">{rightButtons.length ? rightButtons : <div />}</HorizontalGroup>\n        </div>\n        {!!ruleToDelete && (\n          <ConfirmModal\n            isOpen={true}\n            title=\"Delete rule\"\n            body=\"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?\"\n            confirmText=\"Yes, delete\"\n            icon=\"exclamation-triangle\"\n            onConfirm={deleteRule}\n            onDismiss={() => setRuleToDelete(undefined)}\n          />\n        )}\n      </>\n    );\n  }\n\n  return null;\n};\n\nfunction inViewMode(pathname: string): boolean {\n  return pathname.endsWith('/view');\n}\n\nexport const getStyles = (theme: GrafanaTheme2) => ({\n  wrapper: css`\n    padding: ${theme.spacing(2)} 0;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    flex-wrap: wrap;\n    border-bottom: solid 1px ${theme.colors.border.medium};\n  `,\n  button: css`\n    height: 24px;\n    margin-top: ${theme.spacing(1)};\n    font-size: ${theme.typography.size.sm};\n  `,\n});\n\nfunction isGrafanaRulerRule(rule?: RulerRuleDTO): rule is RulerGrafanaRuleDTO {\n  if (!rule) {\n    return false;\n  }\n  return (rule as RulerGrafanaRuleDTO).grafana_alert != null;\n}\n","import React, { useMemo, useState } from 'react';\nimport { Modal } from '@grafana/ui';\nimport { StateHistory } from '../components/rules/StateHistory';\n\nfunction useStateHistoryModal(alertId: string) {\n  const [showModal, setShowModal] = useState<boolean>(false);\n\n  const StateHistoryModal = useMemo(\n    () => (\n      <Modal\n        isOpen={showModal}\n        onDismiss={() => setShowModal(false)}\n        closeOnBackdropClick={true}\n        closeOnEscape={true}\n        title=\"State history\"\n      >\n        <StateHistory alertId={alertId} />\n      </Modal>\n    ),\n    [alertId, showModal]\n  );\n\n  return {\n    StateHistoryModal,\n    showStateHistoryModal: () => setShowModal(true),\n    hideStateHistoryModal: () => setShowModal(false),\n  };\n}\n\nexport { useStateHistoryModal };\n","import React from 'react';\nimport { css } from '@emotion/css';\nimport { useStyles2 } from '@grafana/ui';\nimport { AnnotationDetailsField } from '../AnnotationDetailsField';\n\ntype Props = {\n  annotations: Array<[string, string]>;\n};\n\nexport function RuleDetailsAnnotations(props: Props): JSX.Element | null {\n  const { annotations } = props;\n  const styles = useStyles2(getStyles);\n\n  if (annotations.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className={styles.annotations}>\n      {annotations.map(([key, value]) => (\n        <AnnotationDetailsField key={key} annotationKey={key} value={value} />\n      ))}\n    </div>\n  );\n}\n\nconst getStyles = () => ({\n  annotations: css`\n    margin-top: 46px;\n  `,\n});\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { getDataSourceSrv } from '@grafana/runtime';\nimport { useStyles2 } from '@grafana/ui';\nimport { ExpressionDatasourceUID } from 'app/features/expressions/ExpressionDatasource';\nimport { CombinedRule, RulesSource } from 'app/types/unified-alerting';\nimport React, { useMemo } from 'react';\nimport { isCloudRulesSource } from '../../utils/datasource';\nimport { isGrafanaRulerRule } from '../../utils/rules';\nimport { DetailsField } from '../DetailsField';\n\ntype Props = {\n  rule: CombinedRule;\n  rulesSource: RulesSource;\n};\n\nexport function RuleDetailsDataSources(props: Props): JSX.Element | null {\n  const { rulesSource, rule } = props;\n  const styles = useStyles2(getStyles);\n\n  const dataSources: Array<{ name: string; icon?: string }> = useMemo(() => {\n    if (isCloudRulesSource(rulesSource)) {\n      return [{ name: rulesSource.name, icon: rulesSource.meta.info.logos.small }];\n    }\n\n    if (isGrafanaRulerRule(rule.rulerRule)) {\n      const { data } = rule.rulerRule.grafana_alert;\n      const unique = data.reduce((dataSources, query) => {\n        const ds = getDataSourceSrv().getInstanceSettings(query.datasourceUid);\n\n        if (!ds || ds.uid === ExpressionDatasourceUID) {\n          return dataSources;\n        }\n\n        dataSources[ds.name] = { name: ds.name, icon: ds.meta.info.logos.small };\n        return dataSources;\n      }, {} as Record<string, { name: string; icon?: string }>);\n\n      return Object.values(unique);\n    }\n\n    return [];\n  }, [rule, rulesSource]);\n\n  if (dataSources.length === 0) {\n    return null;\n  }\n\n  return (\n    <DetailsField label=\"Data source\">\n      {dataSources.map(({ name, icon }, index) => (\n        <div key={name}>\n          {icon && (\n            <>\n              <img alt={`${name} datasource logo`} className={styles.dataSourceIcon} src={icon} />{' '}\n            </>\n          )}\n          {name}\n        </div>\n      ))}\n    </DetailsField>\n  );\n}\n\nfunction getStyles(theme: GrafanaTheme2) {\n  const size = theme.spacing(2);\n\n  return {\n    dataSourceIcon: css`\n      width: ${size};\n      height: ${size};\n    `,\n  };\n}\n","import { Editor } from '@grafana/slate-react';\nimport React, { FC, useMemo } from 'react';\nimport PromqlSyntax from 'app/plugins/datasource/prometheus/promql';\nimport LogqlSyntax from 'app/plugins/datasource/loki/syntax';\nimport { LanguageMap, languages as prismLanguages } from 'prismjs';\nimport { makeValue, SlatePrism, useStyles } from '@grafana/ui';\nimport { css, cx } from '@emotion/css';\nimport { GrafanaTheme } from '@grafana/data';\nimport { RulesSource } from 'app/types/unified-alerting';\nimport { DataSourceType, isCloudRulesSource } from '../utils/datasource';\nimport { Well } from './Well';\n\ninterface Props {\n  expression: string;\n  rulesSource: RulesSource;\n}\n\nexport const HighlightedQuery: FC<{ language: 'promql' | 'logql'; expr: string }> = ({ language, expr }) => {\n  const plugins = useMemo(\n    () => [\n      SlatePrism(\n        {\n          onlyIn: (node: any) => node.type === 'code_block',\n          getSyntax: () => language,\n        },\n        { ...(prismLanguages as LanguageMap), [language]: language === 'logql' ? LogqlSyntax : PromqlSyntax }\n      ),\n    ],\n    [language]\n  );\n\n  const slateValue = useMemo(() => makeValue(expr), [expr]);\n\n  return <Editor plugins={plugins} value={slateValue} readOnly={true} />;\n};\n\nexport const Expression: FC<Props> = ({ expression: query, rulesSource }) => {\n  const styles = useStyles(getStyles);\n\n  return (\n    <Well className={cx(styles.well, 'slate-query-field')}>\n      {isCloudRulesSource(rulesSource) ? (\n        <HighlightedQuery expr={query} language={rulesSource.type === DataSourceType.Loki ? 'logql' : 'promql'} />\n      ) : (\n        query\n      )}\n    </Well>\n  );\n};\n\nexport const getStyles = (theme: GrafanaTheme) => ({\n  well: css`\n    font-family: ${theme.typography.fontFamily.monospace};\n  `,\n});\n","import React from 'react';\nimport { css, cx } from '@emotion/css';\nimport { CombinedRule, RulesSource } from 'app/types/unified-alerting';\nimport { isCloudRulesSource } from '../../utils/datasource';\nimport { DetailsField } from '../DetailsField';\nimport { Expression } from '../Expression';\n\ntype Props = {\n  rule: CombinedRule;\n  rulesSource: RulesSource;\n  annotations: Array<[string, string]>;\n};\n\nexport function RuleDetailsExpression(props: Props): JSX.Element | null {\n  const { annotations, rulesSource, rule } = props;\n  const styles = getStyles();\n\n  if (!isCloudRulesSource(rulesSource)) {\n    return null;\n  }\n\n  return (\n    <DetailsField label=\"Expression\" horizontal={true} className={cx({ [styles.exprRow]: !!annotations.length })}>\n      <Expression expression={rule.query} rulesSource={rulesSource} />\n    </DetailsField>\n  );\n}\n\nconst getStyles = () => ({\n  exprRow: css`\n    margin-bottom: 46px;\n  `,\n});\n","import { Alert } from 'app/types/unified-alerting';\nimport React, { FC } from 'react';\nimport { AnnotationDetailsField } from '../AnnotationDetailsField';\nimport { DetailsField } from '../DetailsField';\n\ninterface Props {\n  instance: Alert;\n}\n\nexport const AlertInstanceDetails: FC<Props> = ({ instance }) => {\n  const annotations = (Object.entries(instance.annotations || {}) || []).filter(([_, value]) => !!value.trim());\n\n  return (\n    <div>\n      {instance.value && (\n        <DetailsField label=\"Value\" horizontal={true}>\n          {instance.value}\n        </DetailsField>\n      )}\n      {annotations.map(([key, value]) => (\n        <AnnotationDetailsField key={key} annotationKey={key} value={value} />\n      ))}\n    </div>\n  );\n};\n","import { GrafanaTheme2 } from '@grafana/data';\nimport { Alert } from 'app/types/unified-alerting';\nimport { css } from '@emotion/css';\nimport React, { FC, useMemo } from 'react';\nimport { alertInstanceKey } from '../../utils/rules';\nimport { AlertLabels } from '../AlertLabels';\nimport { AlertInstanceDetails } from './AlertInstanceDetails';\nimport { AlertStateTag } from './AlertStateTag';\nimport { DynamicTable, DynamicTableColumnProps, DynamicTableItemProps } from '../DynamicTable';\n\ninterface Props {\n  instances: Alert[];\n}\n\ntype AlertTableColumnProps = DynamicTableColumnProps<Alert>;\ntype AlertTableItemProps = DynamicTableItemProps<Alert>;\n\nexport const AlertInstancesTable: FC<Props> = ({ instances }) => {\n  // add key & sort instance. API returns instances in random order, different every time.\n  const items = useMemo(\n    (): AlertTableItemProps[] =>\n      instances\n        .map((instance) => ({\n          data: instance,\n          id: alertInstanceKey(instance),\n        }))\n        .sort((a, b) => a.id.localeCompare(b.id)),\n    [instances]\n  );\n\n  return (\n    <DynamicTable\n      cols={columns}\n      isExpandable={true}\n      items={items}\n      renderExpandedContent={({ data }) => <AlertInstanceDetails instance={data} />}\n    />\n  );\n};\n\nexport const getStyles = (theme: GrafanaTheme2) => ({\n  colExpand: css`\n    width: 36px;\n  `,\n  colState: css`\n    width: 110px;\n  `,\n  labelsCell: css`\n    padding-top: ${theme.spacing(0.5)} !important;\n    padding-bottom: ${theme.spacing(0.5)} !important;\n  `,\n  createdCell: css`\n    white-space: nowrap;\n  `,\n  table: css`\n    td {\n      vertical-align: top;\n      padding-top: ${theme.spacing(1)};\n      padding-bottom: ${theme.spacing(1)};\n    }\n  `,\n});\n\nconst columns: AlertTableColumnProps[] = [\n  {\n    id: 'state',\n    label: 'State',\n    // eslint-disable-next-line react/display-name\n    renderCell: ({ data: { state } }) => <AlertStateTag state={state} />,\n    size: '80px',\n  },\n  {\n    id: 'labels',\n    label: 'Labels',\n    // eslint-disable-next-line react/display-name\n    renderCell: ({ data: { labels } }) => <AlertLabels labels={labels} />,\n  },\n  {\n    id: 'created',\n    label: 'Created',\n    // eslint-disable-next-line react/display-name\n    renderCell: ({ data: { activeAt } }) => (\n      <>{activeAt.startsWith('0001') ? '-' : activeAt.substr(0, 19).replace('T', ' ')}</>\n    ),\n    size: '150px',\n  },\n];\n","import { Rule } from 'app/types/unified-alerting';\nimport React from 'react';\nimport { isAlertingRule } from '../../utils/rules';\nimport { DetailsField } from '../DetailsField';\nimport { AlertInstancesTable } from './AlertInstancesTable';\n\ntype Props = {\n  promRule?: Rule;\n};\n\nexport function RuleDetailsMatchingInstances(props: Props): JSX.Element | null {\n  const { promRule } = props;\n\n  if (!isAlertingRule(promRule) || !promRule.alerts?.length) {\n    return null;\n  }\n\n  return (\n    <DetailsField label=\"Matching instances\" horizontal={true}>\n      <AlertInstancesTable instances={promRule.alerts} />\n    </DetailsField>\n  );\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Icon, Tooltip, useStyles2 } from '@grafana/ui';\nimport { Rule } from 'app/types/unified-alerting';\nimport React, { FC } from 'react';\n\ninterface Prom {\n  rule: Rule;\n}\n\nexport const RuleHealth: FC<Prom> = ({ rule }) => {\n  const style = useStyles2(getStyle);\n  if (rule.health === 'err' || rule.health === 'error') {\n    return (\n      <Tooltip theme=\"error\" content={rule.lastError || 'No error message provided.'}>\n        <div className={style.warn}>\n          <Icon name=\"exclamation-triangle\" />\n          <span>error</span>\n        </div>\n      </Tooltip>\n    );\n  }\n  return <>{rule.health}</>;\n};\n\nconst getStyle = (theme: GrafanaTheme2) => ({\n  warn: css`\n    display: inline-flex;\n    flex-direction: row;\n    color: ${theme.colors.warning.text};\n    & > * + * {\n      margin-left: ${theme.spacing(1)};\n    }\n  `,\n});\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2, intervalToAbbreviatedDurationString } from '@grafana/data';\nimport { HorizontalGroup, Spinner, useStyles2 } from '@grafana/ui';\nimport { CombinedRule } from 'app/types/unified-alerting';\nimport { PromAlertingRuleState } from 'app/types/unified-alerting-dto';\nimport React, { FC, useMemo } from 'react';\nimport { isAlertingRule, isRecordingRule, getFirstActiveAt } from '../../utils/rules';\nimport { AlertStateTag } from './AlertStateTag';\n\ninterface Props {\n  rule: CombinedRule;\n  isDeleting: boolean;\n  isCreating: boolean;\n}\n\nexport const RuleState: FC<Props> = ({ rule, isDeleting, isCreating }) => {\n  const style = useStyles2(getStyle);\n  const { promRule } = rule;\n\n  // return how long the rule has been in it's firing state, if any\n  const forTime = useMemo(() => {\n    if (\n      promRule &&\n      isAlertingRule(promRule) &&\n      promRule.alerts?.length &&\n      promRule.state !== PromAlertingRuleState.Inactive\n    ) {\n      // find earliest alert\n      const firstActiveAt = getFirstActiveAt(promRule);\n\n      // calculate time elapsed from earliest alert\n      if (firstActiveAt) {\n        return (\n          <span title={String(firstActiveAt)} className={style.for}>\n            for{' '}\n            {intervalToAbbreviatedDurationString(\n              {\n                start: firstActiveAt,\n                end: new Date(),\n              },\n              false\n            )}\n          </span>\n        );\n      }\n    }\n    return null;\n  }, [promRule, style]);\n\n  if (isDeleting) {\n    return (\n      <HorizontalGroup align=\"flex-start\">\n        <Spinner />\n        deleting\n      </HorizontalGroup>\n    );\n  } else if (isCreating) {\n    return (\n      <HorizontalGroup align=\"flex-start\">\n        {' '}\n        <Spinner />\n        creating\n      </HorizontalGroup>\n    );\n  } else if (promRule && isAlertingRule(promRule)) {\n    return (\n      <HorizontalGroup align=\"flex-start\">\n        <AlertStateTag state={promRule.state} />\n        {forTime}\n      </HorizontalGroup>\n    );\n  } else if (promRule && isRecordingRule(promRule)) {\n    return <>Recording rule</>;\n  }\n  return <>n/a</>;\n};\n\nconst getStyle = (theme: GrafanaTheme2) => ({\n  for: css`\n    font-size: ${theme.typography.bodySmall.fontSize};\n    color: ${theme.colors.text.secondary};\n    white-space: nowrap;\n    padding-top: 2px;\n  `,\n});\n","import {\n  CombinedRule,\n  CombinedRuleGroup,\n  CombinedRuleNamespace,\n  Rule,\n  RuleGroup,\n  RuleNamespace,\n  RulesSource,\n} from 'app/types/unified-alerting';\nimport { RulerRuleDTO, RulerRuleGroupDTO, RulerRulesConfigDTO } from 'app/types/unified-alerting-dto';\nimport { useMemo, useRef } from 'react';\nimport {\n  getAllRulesSources,\n  getRulesSourceByName,\n  isCloudRulesSource,\n  isGrafanaRulesSource,\n} from '../utils/datasource';\nimport { isAlertingRule, isAlertingRulerRule, isRecordingRulerRule } from '../utils/rules';\nimport { useUnifiedAlertingSelector } from './useUnifiedAlertingSelector';\n\ninterface CacheValue {\n  promRules?: RuleNamespace[];\n  rulerRules?: RulerRulesConfigDTO | null;\n  result: CombinedRuleNamespace[];\n}\n\n// this little monster combines prometheus rules and ruler rules to produce a unified data structure\n// can limit to a single rules source\nexport function useCombinedRuleNamespaces(rulesSourceName?: string): CombinedRuleNamespace[] {\n  const promRulesResponses = useUnifiedAlertingSelector((state) => state.promRules);\n  const rulerRulesResponses = useUnifiedAlertingSelector((state) => state.rulerRules);\n\n  // cache results per rules source, so we only recalculate those for which results have actually changed\n  const cache = useRef<Record<string, CacheValue>>({});\n\n  const rulesSources = useMemo((): RulesSource[] => {\n    if (rulesSourceName) {\n      const rulesSource = getRulesSourceByName(rulesSourceName);\n      if (!rulesSource) {\n        throw new Error(`Unknown rules source: ${rulesSourceName}`);\n      }\n      return [rulesSource];\n    }\n    return getAllRulesSources();\n  }, [rulesSourceName]);\n\n  return useMemo(\n    () =>\n      rulesSources\n        .map((rulesSource): CombinedRuleNamespace[] => {\n          const rulesSourceName = isCloudRulesSource(rulesSource) ? rulesSource.name : rulesSource;\n          const promRules = promRulesResponses[rulesSourceName]?.result;\n          const rulerRules = rulerRulesResponses[rulesSourceName]?.result;\n\n          const cached = cache.current[rulesSourceName];\n          if (cached && cached.promRules === promRules && cached.rulerRules === rulerRules) {\n            return cached.result;\n          }\n          const namespaces: Record<string, CombinedRuleNamespace> = {};\n\n          // first get all the ruler rules in\n          Object.entries(rulerRules || {}).forEach(([namespaceName, groups]) => {\n            const namespace: CombinedRuleNamespace = {\n              rulesSource,\n              name: namespaceName,\n              groups: [],\n            };\n            namespaces[namespaceName] = namespace;\n            addRulerGroupsToCombinedNamespace(namespace, groups);\n          });\n\n          // then correlate with prometheus rules\n          promRules?.forEach(({ name: namespaceName, groups }) => {\n            const ns = (namespaces[namespaceName] = namespaces[namespaceName] || {\n              rulesSource,\n              name: namespaceName,\n              groups: [],\n            });\n\n            addPromGroupsToCombinedNamespace(ns, groups);\n          });\n\n          const result = Object.values(namespaces);\n          if (isGrafanaRulesSource(rulesSource)) {\n            // merge all groups in case of grafana managed, essentially treating namespaces (folders) as gorups\n            result.forEach((namespace) => {\n              namespace.groups = [\n                {\n                  name: 'default',\n                  rules: namespace.groups.flatMap((g) => g.rules).sort((a, b) => a.name.localeCompare(b.name)),\n                },\n              ];\n            });\n          }\n          cache.current[rulesSourceName] = { promRules, rulerRules, result };\n          return result;\n        })\n        .flat(),\n    [promRulesResponses, rulerRulesResponses, rulesSources]\n  );\n}\n\nfunction addRulerGroupsToCombinedNamespace(namespace: CombinedRuleNamespace, groups: RulerRuleGroupDTO[]): void {\n  namespace.groups = groups.map((group) => {\n    const combinedGroup: CombinedRuleGroup = {\n      name: group.name,\n      interval: group.interval,\n      rules: [],\n    };\n    combinedGroup.rules = group.rules.map((rule) => rulerRuleToCombinedRule(rule, namespace, combinedGroup));\n    return combinedGroup;\n  });\n}\n\nfunction addPromGroupsToCombinedNamespace(namespace: CombinedRuleNamespace, groups: RuleGroup[]): void {\n  groups.forEach((group) => {\n    let combinedGroup = namespace.groups.find((g) => g.name === group.name);\n    if (!combinedGroup) {\n      combinedGroup = {\n        name: group.name,\n        rules: [],\n      };\n      namespace.groups.push(combinedGroup);\n    }\n\n    (group.rules ?? []).forEach((rule) => {\n      const existingRule = getExistingRuleInGroup(rule, combinedGroup!, namespace.rulesSource);\n      if (existingRule) {\n        existingRule.promRule = rule;\n      } else {\n        combinedGroup!.rules.push(promRuleToCombinedRule(rule, namespace, combinedGroup!));\n      }\n    });\n  });\n}\n\nfunction promRuleToCombinedRule(rule: Rule, namespace: CombinedRuleNamespace, group: CombinedRuleGroup): CombinedRule {\n  return {\n    name: rule.name,\n    query: rule.query,\n    labels: rule.labels || {},\n    annotations: isAlertingRule(rule) ? rule.annotations || {} : {},\n    promRule: rule,\n    namespace: namespace,\n    group,\n  };\n}\n\nfunction rulerRuleToCombinedRule(\n  rule: RulerRuleDTO,\n  namespace: CombinedRuleNamespace,\n  group: CombinedRuleGroup\n): CombinedRule {\n  return isAlertingRulerRule(rule)\n    ? {\n        name: rule.alert,\n        query: rule.expr,\n        labels: rule.labels || {},\n        annotations: rule.annotations || {},\n        rulerRule: rule,\n        namespace,\n        group,\n      }\n    : isRecordingRulerRule(rule)\n    ? {\n        name: rule.record,\n        query: rule.expr,\n        labels: rule.labels || {},\n        annotations: {},\n        rulerRule: rule,\n        namespace,\n        group,\n      }\n    : {\n        name: rule.grafana_alert.title,\n        query: '',\n        labels: rule.labels || {},\n        annotations: rule.annotations || {},\n        rulerRule: rule,\n        namespace,\n        group,\n      };\n}\n\n// find existing rule in group that matches the given prom rule\nfunction getExistingRuleInGroup(\n  rule: Rule,\n  group: CombinedRuleGroup,\n  rulesSource: RulesSource\n): CombinedRule | undefined {\n  if (isGrafanaRulesSource(rulesSource)) {\n    // assume grafana groups have only the one rule. check name anyway because paranoid\n    return group!.rules.find((existingRule) => existingRule.name === rule.name);\n  }\n  return (\n    // try finding a rule that matches name, labels, annotations and query\n    group!.rules.find(\n      (existingRule) => !existingRule.promRule && isCombinedRuleEqualToPromRule(existingRule, rule, true)\n    ) ??\n    // if that fails, try finding a rule that only matches name, labels and annotations.\n    // loki & prom can sometimes modify the query so it doesnt match, eg `2 > 1` becomes `1`\n    group!.rules.find(\n      (existingRule) => !existingRule.promRule && isCombinedRuleEqualToPromRule(existingRule, rule, false)\n    )\n  );\n}\n\nfunction isCombinedRuleEqualToPromRule(combinedRule: CombinedRule, rule: Rule, checkQuery = true): boolean {\n  if (combinedRule.name === rule.name) {\n    return (\n      JSON.stringify([\n        checkQuery ? hashQuery(combinedRule.query) : '',\n        combinedRule.labels,\n        combinedRule.annotations,\n      ]) ===\n      JSON.stringify([\n        checkQuery ? hashQuery(rule.query) : '',\n        rule.labels || {},\n        isAlertingRule(rule) ? rule.annotations || {} : {},\n      ])\n    );\n  }\n  return false;\n}\n\n// there can be slight differences in how prom & ruler render a query, this will hash them accounting for the differences\nfunction hashQuery(query: string) {\n  // one of them might be wrapped in parens\n  if (query.length > 1 && query[0] === '(' && query[query.length - 1] === ')') {\n    query = query.substr(1, query.length - 2);\n  }\n  // whitespace could be added or removed\n  query = query.replace(/\\s|\\n/g, '');\n  // labels matchers can be reordered, so sort the enitre string, esentially comparing just the character counts\n  return query.split('').sort().join('');\n}\n","import { FolderDTO } from 'app/types';\nimport { useDispatch } from 'react-redux';\nimport { useUnifiedAlertingSelector } from './useUnifiedAlertingSelector';\nimport { useEffect } from 'react';\nimport { fetchFolderIfNotFetchedAction } from '../state/actions';\nimport { initialAsyncRequestState } from '../utils/redux';\n\ninterface ReturnBag {\n  folder?: FolderDTO;\n  loading: boolean;\n}\n\nexport function useFolder(uid?: string): ReturnBag {\n  const dispatch = useDispatch();\n  const folderRequests = useUnifiedAlertingSelector((state) => state.folders);\n  useEffect(() => {\n    if (uid) {\n      dispatch(fetchFolderIfNotFetchedAction(uid));\n    }\n  }, [dispatch, uid]);\n\n  if (uid) {\n    const request = folderRequests[uid] || initialAsyncRequestState;\n    return {\n      folder: request.result,\n      loading: request.loading,\n    };\n  }\n  return {\n    loading: false,\n  };\n}\n","import { contextSrv } from 'app/core/services/context_srv';\nimport { isGrafanaRulerRule } from '../utils/rules';\nimport { RulerRuleDTO } from 'app/types/unified-alerting-dto';\nimport { useFolder } from './useFolder';\nimport { useUnifiedAlertingSelector } from './useUnifiedAlertingSelector';\nimport { useDispatch } from 'react-redux';\nimport { useEffect } from 'react';\nimport { checkIfLotexSupportsEditingRulesAction } from '../state/actions';\nimport { GRAFANA_RULES_SOURCE_NAME } from '../utils/datasource';\n\ninterface ResultBag {\n  isEditable?: boolean;\n  loading: boolean;\n}\n\nexport function useIsRuleEditable(rulesSourceName: string, rule?: RulerRuleDTO): ResultBag {\n  const checkEditingRequests = useUnifiedAlertingSelector((state) => state.lotexSupportsRuleEditing);\n  const dispatch = useDispatch();\n  const folderUID = rule && isGrafanaRulerRule(rule) ? rule.grafana_alert.namespace_uid : undefined;\n\n  const { folder, loading } = useFolder(folderUID);\n\n  useEffect(() => {\n    if (checkEditingRequests[rulesSourceName] === undefined && rulesSourceName !== GRAFANA_RULES_SOURCE_NAME) {\n      dispatch(checkIfLotexSupportsEditingRulesAction(rulesSourceName));\n    }\n  }, [rulesSourceName, checkEditingRequests, dispatch]);\n\n  if (!rule) {\n    return { isEditable: false, loading: false };\n  }\n\n  // grafana rules can be edited if user can edit the folder they're in\n  if (isGrafanaRulerRule(rule)) {\n    if (!folderUID) {\n      throw new Error(\n        `Rule ${rule.grafana_alert.title} does not have a folder uid, cannot determine if it is editable.`\n      );\n    }\n    return {\n      isEditable: folder?.canSave,\n      loading,\n    };\n  }\n\n  // prom rules are only editable by users with Editor role and only if rules source supports editing\n  return {\n    isEditable: contextSrv.isEditor && !!checkEditingRequests[rulesSourceName]?.result,\n    loading: !!checkEditingRequests[rulesSourceName]?.loading,\n  };\n}\n"],"names":["wellableAnnotationKeys","AnnotationDetailsField","annotationKey","value","label","annotationLabels","Tooltip","content","placement","theme","horizontal","AnnotationValue","styles","useStyles","getStyles","includes","startsWith","href","target","className","link","well","css","colors","textBlue","DetailsField","children","useStyles2","cx","field","fieldHorizontal","fieldVertical","breakpoints","down","spacing","typography","size","sm","fontWeightBold","text","secondary","DynamicTable","cols","items","isExpandable","onCollapse","onExpand","isExpanded","renderExpandedContent","testIdGenerator","renderPrefixCell","renderPrefixHeader","Error","expandedIds","setExpandedIds","useState","container","row","cell","map","col","id","item","index","isItemExpanded","expandCell","IconButton","expandButton","name","onClick","filter","itemId","toggleExpanded","type","bodyCell","renderCell","expandedContentRow","hasPrefixCell","sizes","unshift","border","strong","join","background","primary","length","Well","wrapper","panelBg","formInputBorder","radius","xs","fontFamily","monospace","StateHistory","alertId","loading","error","result","dispatch","useDispatch","history","useUnifiedAlertingSelector","state","managedAlertStateHistory","useEffect","fetchGrafanaAnnotationsAction","useManagedAlertStateHistory","LoadingPlaceholder","Alert","title","message","columns","renderStateCell","renderValueCell","renderTimestampCell","reduce","acc","push","String","newState","data","timestamp","updated","currentHistoryItem","previousHistoryItem","prevState","hasMatchingPrecedingState","uniqueId","historyItem","matches","evalMatches","LabelsWrapper","match","AlertLabel","labelKey","metric","AlertStateTag","TimestampStyle","dateTimeFormat","RuleDetailsActionButtons","rule","rulesSource","location","useLocation","style","namespace","group","rulerRule","ruleToDelete","setRuleToDelete","grafana_alert","isGrafanaRulerRule","StateHistoryModal","showStateHistoryModal","showModal","setShowModal","useMemo","Modal","isOpen","onDismiss","closeOnBackdropClick","closeOnEscape","hideStateHistoryModal","useStateHistoryModal","alertmanagerSourceName","isGrafanaRulesSource","getAlertmanagerByUid","jsonData","alertmanagerUid","leftButtons","rightButtons","isEditable","useIsRuleEditable","getRulesSourceName","returnTo","pathname","search","isViewMode","endsWith","deleteRule","identifier","ruleId","deleteRuleAction","navigateTo","undefined","buildShareUrl","isCloudRulesSource","ruleUrl","encodeURIComponent","config","window","split","contextSrv","LinkButton","button","variant","icon","createExploreLink","query","annotations","Annotation","dashboardUID","panelId","makeRuleBasedSilenceLink","Fragment","Button","createViewLink","sourceName","editURL","urlUtil","ClipboardButton","onClipboardCopy","appEvents","AppEvents","onClipboardError","e","getText","HorizontalGroup","width","ConfirmModal","body","confirmText","onConfirm","medium","RuleDetailsAnnotations","props","key","RuleDetailsDataSources","dataSources","meta","info","logos","small","unique","ds","getDataSourceSrv","getInstanceSettings","datasourceUid","uid","ExpressionDatasourceUID","Object","values","alt","dataSourceIcon","src","HighlightedQuery","language","expr","plugins","SlatePrism","onlyIn","node","getSyntax","prismLanguages","LogqlSyntax","PromqlSyntax","slateValue","makeValue","readOnly","Expression","expression","DataSourceType","RuleDetailsExpression","exprRow","AlertInstanceDetails","instance","entries","_","trim","AlertInstancesTable","instances","alertInstanceKey","sort","a","b","localeCompare","labels","AlertLabels","activeAt","substr","replace","RuleDetailsMatchingInstances","promRule","isAlertingRule","alerts","RuleHealth","getStyle","health","lastError","warn","Icon","warning","RuleState","isDeleting","isCreating","forTime","PromAlertingRuleState","firstActiveAt","getFirstActiveAt","for","intervalToAbbreviatedDurationString","start","end","Date","align","Spinner","isRecordingRule","bodySmall","fontSize","useCombinedRuleNamespaces","rulesSourceName","promRulesResponses","promRules","rulerRulesResponses","rulerRules","cache","useRef","rulesSources","getRulesSourceByName","getAllRulesSources","cached","current","namespaces","forEach","namespaceName","groups","combinedGroup","interval","rules","isAlertingRulerRule","alert","isRecordingRulerRule","record","rulerRuleToCombinedRule","addRulerGroupsToCombinedNamespace","find","g","existingRule","isCombinedRuleEqualToPromRule","getExistingRuleInGroup","promRuleToCombinedRule","addPromGroupsToCombinedNamespace","flatMap","flat","combinedRule","checkQuery","JSON","stringify","hashQuery","useFolder","folderRequests","folders","fetchFolderIfNotFetchedAction","request","initialAsyncRequestState","folder","checkEditingRequests","lotexSupportsRuleEditing","folderUID","namespace_uid","GRAFANA_RULES_SOURCE_NAME","checkIfLotexSupportsEditingRulesAction","canSave"],"sourceRoot":""}