{"version":3,"file":"AlertSilences.787ecc600122eb73aeab.js","mappings":"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","sources":["webpack://grafana/./public/app/core/hooks/useCleanup.ts","webpack://grafana/./public/app/core/hooks/useQueryParams.ts","webpack://grafana/./public/app/features/alerting/unified/components/silences/NoSilencesCTA.tsx","webpack://grafana/./public/app/features/alerting/unified/components/silences/SilencesFilter.tsx","webpack://grafana/./public/app/features/alerting/unified/components/silences/SilenceStateTag.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/ActionButton.tsx","webpack://grafana/./public/app/features/alerting/unified/components/silences/SilencedAlertsTableRow.tsx","webpack://grafana/./public/app/features/alerting/unified/components/silences/SilencedAlertsTable.tsx","webpack://grafana/./public/app/features/alerting/unified/components/silences/SilenceDetails.tsx","webpack://grafana/./public/app/features/alerting/unified/components/silences/SilencesTable.tsx","webpack://grafana/./public/app/features/alerting/unified/components/silences/MatchersField.tsx","webpack://grafana/./public/app/features/alerting/unified/components/silences/SilencePeriod.tsx","webpack://grafana/./public/app/features/alerting/unified/components/silences/SilencesEditor.tsx","webpack://grafana/./public/app/features/alerting/unified/hooks/useURLSearchParams.ts","webpack://grafana/./public/app/features/alerting/unified/Silences.tsx","webpack://grafana/./public/app/features/alerting/unified/components/AlertingPageWrapper.tsx","webpack://grafana/./public/app/features/alerting/unified/components/DynamicTable.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/ActionIcon.tsx","webpack://grafana/./public/app/features/alerting/unified/components/silences/AmAlertStateTag.tsx","webpack://grafana/./public/app/features/alerting/unified/components/silences/Matchers.tsx","webpack://grafana/./public/app/features/alerting/unified/hooks/useAlertManagerSourceName.ts","webpack://grafana/./public/app/features/alerting/unified/styles/table.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { cleanUpAction, StateSelector } from '../actions/cleanUp';\n\nexport function useCleanup<T>(stateSelector: StateSelector<T>) {\n  const dispatch = useDispatch();\n  //bit of a hack to unburden user from having to wrap stateSelcetor in a useCallback. Otherwise cleanup would happen on every render\n  const selectorRef = useRef(stateSelector);\n  selectorRef.current = stateSelector;\n  useEffect(() => {\n    return () => {\n      dispatch(cleanUpAction({ stateSelector: selectorRef.current }));\n    };\n  }, [dispatch]);\n}\n","import { UrlQueryMap } from '@grafana/data';\nimport { locationSearchToObject, locationService } from '@grafana/runtime';\nimport { useCallback, useMemo } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nexport function useQueryParams(): [UrlQueryMap, (values: UrlQueryMap, replace?: boolean) => void] {\n  const { search } = useLocation();\n  const queryParams = useMemo(() => locationSearchToObject(search || ''), [search]);\n  const update = useCallback(\n    (values: UrlQueryMap, replace?: boolean) => setImmediate(() => locationService.partial(values, replace)),\n    []\n  );\n  return [queryParams, update];\n}\n","import { CallToActionCard } from '@grafana/ui';\nimport EmptyListCTA from 'app/core/components/EmptyListCTA/EmptyListCTA';\nimport { contextSrv } from 'app/core/services/context_srv';\nimport React, { FC } from 'react';\nimport { makeAMLink } from '../../utils/misc';\n\ntype Props = {\n  alertManagerSourceName: string;\n};\n\nexport const NoSilencesSplash: FC<Props> = ({ alertManagerSourceName }) => {\n  if (contextSrv.isEditor) {\n    return (\n      <EmptyListCTA\n        title=\"You haven't created any silences yet\"\n        buttonIcon=\"bell-slash\"\n        buttonLink={makeAMLink('alerting/silence/new', alertManagerSourceName)}\n        buttonTitle=\"New silence\"\n      />\n    );\n  }\n  return <CallToActionCard callToActionElement={<div />} message=\"No silences found.\" />;\n};\n","import React, { FormEvent, useState } from 'react';\nimport { css } from '@emotion/css';\nimport { Label, Icon, Input, Tooltip, RadioButtonGroup, useStyles2, Button, Field } from '@grafana/ui';\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport { getSilenceFiltersFromUrlParams } from '../../utils/misc';\nimport { SilenceState } from 'app/plugins/datasource/alertmanager/types';\nimport { parseMatchers } from '../../utils/alertmanager';\nimport { debounce } from 'lodash';\n\nconst stateOptions: SelectableValue[] = Object.entries(SilenceState).map(([key, value]) => ({\n  label: key,\n  value,\n}));\n\nexport const SilencesFilter = () => {\n  const [queryStringKey, setQueryStringKey] = useState(`queryString-${Math.random() * 100}`);\n  const [queryParams, setQueryParams] = useQueryParams();\n  const { queryString, silenceState } = getSilenceFiltersFromUrlParams(queryParams);\n  const styles = useStyles2(getStyles);\n\n  const handleQueryStringChange = debounce((e: FormEvent<HTMLInputElement>) => {\n    const target = e.target as HTMLInputElement;\n    setQueryParams({ queryString: target.value || null });\n  }, 400);\n\n  const handleSilenceStateChange = (state: string) => {\n    setQueryParams({ silenceState: state });\n  };\n\n  const clearFilters = () => {\n    setQueryParams({\n      queryString: null,\n      silenceState: null,\n    });\n    setTimeout(() => setQueryStringKey(''));\n  };\n\n  const inputInvalid = queryString && queryString.length > 3 ? parseMatchers(queryString).length === 0 : false;\n\n  return (\n    <div className={styles.flexRow}>\n      <Field\n        className={styles.rowChild}\n        label={\n          <span className={styles.fieldLabel}>\n            <Tooltip\n              content={\n                <div>\n                  Filter silences by matchers using a comma separated list of matchers, ie:\n                  <pre>{`severity=critical, instance=~cluster-us-.+`}</pre>\n                </div>\n              }\n            >\n              <Icon name=\"info-circle\" />\n            </Tooltip>{' '}\n            Search by matchers\n          </span>\n        }\n        invalid={inputInvalid}\n        error={inputInvalid ? 'Query must use valid matcher syntax' : null}\n      >\n        <Input\n          key={queryStringKey}\n          className={styles.searchInput}\n          prefix={<Icon name=\"search\" />}\n          onChange={handleQueryStringChange}\n          defaultValue={queryString ?? ''}\n          placeholder=\"Search\"\n          data-testid=\"search-query-input\"\n        />\n      </Field>\n\n      <div className={styles.rowChild}>\n        <Label>State</Label>\n        <RadioButtonGroup options={stateOptions} value={silenceState} onChange={handleSilenceStateChange} />\n      </div>\n      {(queryString || silenceState) && (\n        <div className={styles.rowChild}>\n          <Button variant=\"secondary\" icon=\"times\" onClick={clearFilters}>\n            Clear filters\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  searchInput: css`\n    width: 360px;\n  `,\n  flexRow: css`\n    display: flex;\n    flex-direction: row;\n    align-items: flex-end;\n    padding-bottom: ${theme.spacing(2)};\n    border-bottom: 1px solid ${theme.colors.border.strong};\n  `,\n  rowChild: css`\n    margin-right: ${theme.spacing(1)};\n    margin-bottom: 0;\n    max-height: 52px;\n  `,\n  fieldLabel: css`\n    font-size: 12px;\n    font-weight: 500;\n  `,\n});\n","import { SilenceState } from 'app/plugins/datasource/alertmanager/types';\nimport React, { FC } from 'react';\nimport { State, StateTag } from '../StateTag';\n\nconst silenceStateToState: Record<SilenceState, State> = {\n  [SilenceState.Active]: 'good',\n  [SilenceState.Expired]: 'neutral',\n  [SilenceState.Pending]: 'neutral',\n};\n\ninterface Props {\n  state: SilenceState;\n}\n\nexport const SilenceStateTag: FC<Props> = ({ state }) => (\n  <StateTag state={silenceStateToState[state]}>{state}</StateTag>\n);\n","import { Button, ButtonProps } from '@grafana/ui/src/components/Button';\nimport React, { FC } from 'react';\nimport { css, cx } from '@emotion/css';\nimport { GrafanaTheme } from '@grafana/data';\nimport { useStyles } from '@grafana/ui';\n\ntype Props = Omit<ButtonProps, 'variant' | 'size'>;\n\nexport const ActionButton: FC<Props> = ({ className, ...restProps }) => (\n  <Button variant=\"secondary\" size=\"xs\" className={cx(useStyles(getStyle), className)} {...restProps} />\n);\n\nexport const getStyle = (theme: GrafanaTheme) => css`\n  height: 24px;\n  font-size: ${theme.typography.size.sm};\n`;\n","import { AlertmanagerAlert } from 'app/plugins/datasource/alertmanager/types';\nimport React, { FC, useState } from 'react';\nimport { CollapseToggle } from '../CollapseToggle';\nimport { intervalToAbbreviatedDurationString } from '@grafana/data';\nimport { AlertLabels } from '../AlertLabels';\nimport { AmAlertStateTag } from './AmAlertStateTag';\n\ninterface Props {\n  alert: AlertmanagerAlert;\n  className?: string;\n}\n\nexport const SilencedAlertsTableRow: FC<Props> = ({ alert, className }) => {\n  const [isCollapsed, setIsCollapsed] = useState(true);\n\n  const duration = intervalToAbbreviatedDurationString({\n    start: new Date(alert.startsAt),\n    end: new Date(alert.endsAt),\n  });\n  const alertName = Object.entries(alert.labels).reduce((name, [labelKey, labelValue]) => {\n    if (labelKey === 'alertname' || labelKey === '__alert_rule_title__') {\n      name = labelValue;\n    }\n    return name;\n  }, '');\n  return (\n    <>\n      <tr className={className}>\n        <td>\n          <CollapseToggle isCollapsed={isCollapsed} onToggle={(collapsed) => setIsCollapsed(collapsed)} />\n        </td>\n        <td>\n          <AmAlertStateTag state={alert.status.state} />\n        </td>\n        <td>for {duration} seconds</td>\n        <td>{alertName}</td>\n      </tr>\n      {!isCollapsed && (\n        <tr className={className}>\n          <td></td>\n          <td colSpan={5}>\n            <AlertLabels labels={alert.labels} />\n          </td>\n        </tr>\n      )}\n    </>\n  );\n};\n","import { AlertmanagerAlert } from 'app/plugins/datasource/alertmanager/types';\nimport React, { FC } from 'react';\nimport { getAlertTableStyles } from '../../styles/table';\nimport { useStyles2 } from '@grafana/ui';\nimport { SilencedAlertsTableRow } from './SilencedAlertsTableRow';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { css, cx } from '@emotion/css';\n\ninterface Props {\n  silencedAlerts: AlertmanagerAlert[];\n}\n\nconst SilencedAlertsTable: FC<Props> = ({ silencedAlerts }) => {\n  const tableStyles = useStyles2(getAlertTableStyles);\n  const styles = useStyles2(getStyles);\n\n  if (!!silencedAlerts.length) {\n    return (\n      <table className={cx(tableStyles.table, styles.tableMargin)}>\n        <colgroup>\n          <col className={tableStyles.colExpand} />\n          <col className={styles.colState} />\n          <col />\n          <col className={styles.colName} />\n        </colgroup>\n        <thead>\n          <tr>\n            <th></th>\n            <th>State</th>\n            <th></th>\n            <th>Alert name</th>\n          </tr>\n        </thead>\n        <tbody>\n          {silencedAlerts.map((alert, index) => {\n            return (\n              <SilencedAlertsTableRow\n                key={alert.fingerprint}\n                alert={alert}\n                className={index % 2 === 0 ? tableStyles.evenRow : ''}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  } else {\n    return null;\n  }\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  tableMargin: css`\n    margin-bottom: ${theme.spacing(1)};\n  `,\n  colState: css`\n    width: 110px;\n  `,\n  colName: css`\n    width: 65%;\n  `,\n});\n\nexport default SilencedAlertsTable;\n","import { css } from '@emotion/css';\nimport { dateMath, GrafanaTheme2, intervalToAbbreviatedDurationString } from '@grafana/data';\nimport React from 'react';\nimport { useStyles2 } from '@grafana/ui';\nimport SilencedAlertsTable from './SilencedAlertsTable';\n\nimport { SilenceTableItem } from './SilencesTable';\n\ninterface Props {\n  silence: SilenceTableItem;\n}\n\nexport const SilenceDetails = ({ silence }: Props) => {\n  const { startsAt, endsAt, comment, createdBy, silencedAlerts } = silence;\n  const styles = useStyles2(getStyles);\n\n  const dateDisplayFormat = 'YYYY-MM-DD HH:mm';\n  const startsAtDate = dateMath.parse(startsAt);\n  const endsAtDate = dateMath.parse(endsAt);\n  const duration = intervalToAbbreviatedDurationString({ start: new Date(startsAt), end: new Date(endsAt) });\n  return (\n    <div className={styles.container}>\n      <div className={styles.title}>Comment</div>\n      <div>{comment}</div>\n      <div className={styles.title}>Schedule</div>\n      <div>{`${startsAtDate?.format(dateDisplayFormat)} - ${endsAtDate?.format(dateDisplayFormat)}`}</div>\n      <div className={styles.title}>Duration</div>\n      <div> {duration}</div>\n      <div className={styles.title}>Created by</div>\n      <div> {createdBy}</div>\n      <div className={styles.title}>Affected alerts</div>\n      <SilencedAlertsTable silencedAlerts={silencedAlerts} />\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: grid;\n    grid-template-columns: 1fr 9fr;\n    grid-row-gap: 1rem;\n  `,\n  title: css`\n    color: ${theme.colors.text.primary};\n  `,\n  row: css`\n    margin: ${theme.spacing(1, 0)};\n  `,\n});\n","import React, { FC, useMemo } from 'react';\nimport { GrafanaTheme2, dateMath } from '@grafana/data';\nimport { Icon, useStyles2, Link, Button } from '@grafana/ui';\nimport { css } from '@emotion/css';\nimport { AlertmanagerAlert, Silence, SilenceState } from 'app/plugins/datasource/alertmanager/types';\nimport { NoSilencesSplash } from './NoSilencesCTA';\nimport { getSilenceFiltersFromUrlParams, makeAMLink } from '../../utils/misc';\nimport { contextSrv } from 'app/core/services/context_srv';\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport { SilencesFilter } from './SilencesFilter';\nimport { parseMatchers } from '../../utils/alertmanager';\nimport { DynamicTable, DynamicTableColumnProps, DynamicTableItemProps } from '../DynamicTable';\nimport { SilenceStateTag } from './SilenceStateTag';\nimport { Matchers } from './Matchers';\nimport { ActionButton } from '../rules/ActionButton';\nimport { ActionIcon } from '../rules/ActionIcon';\nimport { useDispatch } from 'react-redux';\nimport { expireSilenceAction } from '../../state/actions';\nimport { SilenceDetails } from './SilenceDetails';\n\nexport interface SilenceTableItem extends Silence {\n  silencedAlerts: AlertmanagerAlert[];\n}\n\ntype SilenceTableColumnProps = DynamicTableColumnProps<SilenceTableItem>;\ntype SilenceTableItemProps = DynamicTableItemProps<SilenceTableItem>;\ninterface Props {\n  silences: Silence[];\n  alertManagerAlerts: AlertmanagerAlert[];\n  alertManagerSourceName: string;\n}\n\nconst SilencesTable: FC<Props> = ({ silences, alertManagerAlerts, alertManagerSourceName }) => {\n  const styles = useStyles2(getStyles);\n  const [queryParams] = useQueryParams();\n  const filteredSilences = useFilteredSilences(silences);\n\n  const { silenceState } = getSilenceFiltersFromUrlParams(queryParams);\n\n  const showExpiredSilencesBanner =\n    !!filteredSilences.length && (silenceState === undefined || silenceState === SilenceState.Expired);\n\n  const columns = useColumns(alertManagerSourceName);\n\n  const items = useMemo((): SilenceTableItemProps[] => {\n    const findSilencedAlerts = (id: string) => {\n      return alertManagerAlerts.filter((alert) => alert.status.silencedBy.includes(id));\n    };\n    return filteredSilences.map((silence) => {\n      const silencedAlerts = findSilencedAlerts(silence.id);\n      return {\n        id: silence.id,\n        data: { ...silence, silencedAlerts },\n      };\n    });\n  }, [filteredSilences, alertManagerAlerts]);\n\n  return (\n    <div data-testid=\"silences-table\">\n      {!!silences.length && (\n        <>\n          <SilencesFilter />\n          {contextSrv.isEditor && (\n            <div className={styles.topButtonContainer}>\n              <Link href={makeAMLink('/alerting/silence/new', alertManagerSourceName)}>\n                <Button className={styles.addNewSilence} icon=\"plus\">\n                  New Silence\n                </Button>\n              </Link>\n            </div>\n          )}\n          {!!items.length ? (\n            <>\n              <DynamicTable\n                items={items}\n                cols={columns}\n                isExpandable\n                renderExpandedContent={({ data }) => <SilenceDetails silence={data} />}\n              />\n              {showExpiredSilencesBanner && (\n                <div className={styles.callout}>\n                  <Icon className={styles.calloutIcon} name=\"info-circle\" />\n                  <span>Expired silences are automatically deleted after 5 days.</span>\n                </div>\n              )}\n            </>\n          ) : (\n            'No matching silences found'\n          )}\n        </>\n      )}\n      {!silences.length && <NoSilencesSplash alertManagerSourceName={alertManagerSourceName} />}\n    </div>\n  );\n};\n\nconst useFilteredSilences = (silences: Silence[]) => {\n  const [queryParams] = useQueryParams();\n  return useMemo(() => {\n    const { queryString, silenceState } = getSilenceFiltersFromUrlParams(queryParams);\n    const silenceIdsString = queryParams?.silenceIds;\n    return silences.filter((silence) => {\n      if (typeof silenceIdsString === 'string') {\n        const idsIncluded = silenceIdsString.split(',').includes(silence.id);\n        if (!idsIncluded) {\n          return false;\n        }\n      }\n      if (queryString) {\n        const matchers = parseMatchers(queryString);\n        const matchersMatch = matchers.every((matcher) =>\n          silence.matchers?.some(\n            ({ name, value, isEqual, isRegex }) =>\n              matcher.name === name &&\n              matcher.value === value &&\n              matcher.isEqual === isEqual &&\n              matcher.isRegex === isRegex\n          )\n        );\n        if (!matchersMatch) {\n          return false;\n        }\n      }\n      if (silenceState) {\n        const stateMatches = silence.status.state === silenceState;\n        if (!stateMatches) {\n          return false;\n        }\n      }\n      return true;\n    });\n  }, [queryParams, silences]);\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  topButtonContainer: css`\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-end;\n  `,\n  addNewSilence: css`\n    margin: ${theme.spacing(2, 0)};\n  `,\n  callout: css`\n    background-color: ${theme.colors.background.secondary};\n    border-top: 3px solid ${theme.colors.info.border};\n    border-radius: 2px;\n    height: 62px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    margin-top: ${theme.spacing(2)};\n\n    & > * {\n      margin-left: ${theme.spacing(1)};\n    }\n  `,\n  calloutIcon: css`\n    color: ${theme.colors.info.text};\n  `,\n  editButton: css`\n    margin-left: ${theme.spacing(0.5)};\n  `,\n});\n\nfunction useColumns(alertManagerSourceName: string) {\n  const dispatch = useDispatch();\n  const styles = useStyles2(getStyles);\n  return useMemo((): SilenceTableColumnProps[] => {\n    const handleExpireSilenceClick = (id: string) => {\n      dispatch(expireSilenceAction(alertManagerSourceName, id));\n    };\n    const showActions = contextSrv.isEditor;\n    const columns: SilenceTableColumnProps[] = [\n      {\n        id: 'state',\n        label: 'State',\n        renderCell: function renderStateTag({ data: { status } }) {\n          return <SilenceStateTag state={status.state} />;\n        },\n        size: '88px',\n      },\n      {\n        id: 'matchers',\n        label: 'Matching labels',\n        renderCell: function renderMatchers({ data: { matchers } }) {\n          return <Matchers matchers={matchers || []} />;\n        },\n        size: 9,\n      },\n      {\n        id: 'alerts',\n        label: 'Alerts',\n        renderCell: function renderSilencedAlerts({ data: { silencedAlerts } }) {\n          return <span data-testid=\"alerts\">{silencedAlerts.length}</span>;\n        },\n        size: 1,\n      },\n      {\n        id: 'schedule',\n        label: 'Schedule',\n        renderCell: function renderSchedule({ data: { startsAt, endsAt } }) {\n          const startsAtDate = dateMath.parse(startsAt);\n          const endsAtDate = dateMath.parse(endsAt);\n          const dateDisplayFormat = 'YYYY-MM-DD HH:mm';\n          return (\n            <>\n              {' '}\n              {startsAtDate?.format(dateDisplayFormat)} {'-'}\n              <br />\n              {endsAtDate?.format(dateDisplayFormat)}\n            </>\n          );\n        },\n        size: '150px',\n      },\n    ];\n    if (showActions) {\n      columns.push({\n        id: 'actions',\n        label: 'Actions',\n        renderCell: function renderActions({ data: silence }) {\n          return (\n            <>\n              {silence.status.state === 'expired' ? (\n                <Link href={makeAMLink(`/alerting/silence/${silence.id}/edit`, alertManagerSourceName)}>\n                  <ActionButton icon=\"sync\">Recreate</ActionButton>\n                </Link>\n              ) : (\n                <ActionButton icon=\"bell\" onClick={() => handleExpireSilenceClick(silence.id)}>\n                  Unsilence\n                </ActionButton>\n              )}\n              {silence.status.state !== 'expired' && (\n                <ActionIcon\n                  className={styles.editButton}\n                  to={makeAMLink(`/alerting/silence/${silence.id}/edit`, alertManagerSourceName)}\n                  icon=\"pen\"\n                  tooltip=\"edit\"\n                />\n              )}\n            </>\n          );\n        },\n        size: '140px',\n      });\n    }\n    return columns;\n  }, [alertManagerSourceName, dispatch, styles]);\n}\n\nexport default SilencesTable;\n","import React, { FC } from 'react';\nimport { Button, Field, Input, IconButton, InputControl, useStyles2, Select } from '@grafana/ui';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { css, cx } from '@emotion/css';\nimport { useFormContext, useFieldArray } from 'react-hook-form';\nimport { SilenceFormFields } from '../../types/silence-form';\nimport { MatcherOperator } from 'app/plugins/datasource/alertmanager/types';\nimport { matcherFieldOptions } from '../../utils/alertmanager';\n\ninterface Props {\n  className?: string;\n}\n\nconst MatchersField: FC<Props> = ({ className }) => {\n  const styles = useStyles2(getStyles);\n  const formApi = useFormContext<SilenceFormFields>();\n  const {\n    control,\n    register,\n    formState: { errors },\n  } = formApi;\n\n  const { fields: matchers = [], append, remove } = useFieldArray<SilenceFormFields>({ name: 'matchers' });\n\n  return (\n    <div className={cx(className, styles.wrapper)}>\n      <Field label=\"Matching labels\" required>\n        <div>\n          <div className={styles.matchers}>\n            {matchers.map((matcher, index) => {\n              return (\n                <div className={styles.row} key={`${matcher.id}`} data-testid=\"matcher\">\n                  <Field\n                    label=\"Label\"\n                    invalid={!!errors?.matchers?.[index]?.name}\n                    error={errors?.matchers?.[index]?.name?.message}\n                  >\n                    <Input\n                      {...register(`matchers.${index}.name` as const, {\n                        required: { value: true, message: 'Required.' },\n                      })}\n                      defaultValue={matcher.name}\n                      placeholder=\"label\"\n                    />\n                  </Field>\n                  <Field label={'Operator'}>\n                    <InputControl\n                      control={control}\n                      render={({ field: { onChange, ref, ...field } }) => (\n                        <Select\n                          {...field}\n                          menuShouldPortal\n                          onChange={(value) => onChange(value.value)}\n                          className={styles.matcherOptions}\n                          options={matcherFieldOptions}\n                          aria-label=\"operator\"\n                        />\n                      )}\n                      defaultValue={matcher.operator || matcherFieldOptions[0].value}\n                      name={`matchers.${index}.operator` as const}\n                      rules={{ required: { value: true, message: 'Required.' } }}\n                    />\n                  </Field>\n                  <Field\n                    label=\"Value\"\n                    invalid={!!errors?.matchers?.[index]?.value}\n                    error={errors?.matchers?.[index]?.value?.message}\n                  >\n                    <Input\n                      {...register(`matchers.${index}.value` as const, {\n                        required: { value: true, message: 'Required.' },\n                      })}\n                      defaultValue={matcher.value}\n                      placeholder=\"value\"\n                    />\n                  </Field>\n                  {matchers.length > 1 && (\n                    <IconButton\n                      className={styles.removeButton}\n                      tooltip=\"Remove matcher\"\n                      name={'trash-alt'}\n                      onClick={() => remove(index)}\n                    >\n                      Remove\n                    </IconButton>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n          <Button\n            type=\"button\"\n            icon=\"plus\"\n            variant=\"secondary\"\n            onClick={() => {\n              const newMatcher = { name: '', value: '', operator: MatcherOperator.equal };\n              append(newMatcher);\n            }}\n          >\n            Add matcher\n          </Button>\n        </div>\n      </Field>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    wrapper: css`\n      margin-top: ${theme.spacing(2)};\n    `,\n    row: css`\n      display: flex;\n      align-items: flex-start;\n      flex-direction: row;\n      background-color: ${theme.colors.background.secondary};\n      padding: ${theme.spacing(1)} ${theme.spacing(1)} 0 ${theme.spacing(1)};\n      & > * + * {\n        margin-left: ${theme.spacing(2)};\n      }\n    `,\n    removeButton: css`\n      margin-left: ${theme.spacing(1)};\n      margin-top: ${theme.spacing(2.5)};\n    `,\n    matcherOptions: css`\n      min-width: 140px;\n    `,\n    matchers: css`\n      max-width: 585px;\n      margin: ${theme.spacing(1)} 0;\n      padding-top: ${theme.spacing(0.5)};\n    `,\n  };\n};\n\nexport default MatchersField;\n","import { css } from '@emotion/css';\nimport { dateTime, GrafanaTheme } from '@grafana/data';\nimport { Field, TimeRangeInput, useStyles } from '@grafana/ui';\nimport React from 'react';\nimport { useController, useFormContext } from 'react-hook-form';\nimport { SilenceFormFields } from '../../types/silence-form';\n\nexport const SilencePeriod = () => {\n  const { control, getValues } = useFormContext<SilenceFormFields>();\n  const styles = useStyles(getStyles);\n  const {\n    field: { onChange: onChangeStartsAt, value: startsAt },\n    fieldState: { invalid: startsAtInvalid },\n  } = useController({\n    name: 'startsAt',\n    control,\n    rules: {\n      validate: (value) => getValues().endsAt > value,\n    },\n  });\n\n  const {\n    field: { onChange: onChangeEndsAt, value: endsAt },\n    fieldState: { invalid: endsAtInvalid },\n  } = useController({\n    name: 'endsAt',\n    control,\n    rules: {\n      validate: (value) => getValues().startsAt < value,\n    },\n  });\n\n  const {\n    field: { onChange: onChangeTimeZone, value: timeZone },\n  } = useController({\n    name: 'timeZone',\n    control,\n  });\n\n  const invalid = startsAtInvalid || endsAtInvalid;\n\n  const from = dateTime(startsAt);\n  const to = dateTime(endsAt);\n\n  return (\n    <Field\n      className={styles.timeRange}\n      label=\"Silence start and end\"\n      error={invalid ? 'To is before or the same as from' : ''}\n      invalid={invalid}\n    >\n      <TimeRangeInput\n        value={{\n          from,\n          to,\n          raw: {\n            from,\n            to,\n          },\n        }}\n        timeZone={timeZone}\n        onChange={(newValue) => {\n          onChangeStartsAt(dateTime(newValue.from));\n          onChangeEndsAt(dateTime(newValue.to));\n        }}\n        onChangeTimeZone={(newValue) => onChangeTimeZone(newValue)}\n        hideTimeZone={false}\n        hideQuickRanges={true}\n        placeholder={'Select time range'}\n      />\n    </Field>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme) => ({\n  timeRange: css`\n    width: 400px;\n  `,\n});\n","import { MatcherOperator, Silence, SilenceCreatePayload } from 'app/plugins/datasource/alertmanager/types';\nimport React, { FC, useMemo, useState } from 'react';\nimport { Button, Field, FieldSet, Input, LinkButton, TextArea, useStyles2 } from '@grafana/ui';\nimport {\n  DefaultTimeZone,\n  parseDuration,\n  intervalToAbbreviatedDurationString,\n  addDurationToDate,\n  dateTime,\n  isValidDate,\n  GrafanaTheme2,\n} from '@grafana/data';\nimport { useDebounce } from 'react-use';\nimport { config } from '@grafana/runtime';\nimport { pickBy } from 'lodash';\nimport MatchersField from './MatchersField';\nimport { useForm, FormProvider } from 'react-hook-form';\nimport { SilenceFormFields } from '../../types/silence-form';\nimport { useDispatch } from 'react-redux';\nimport { createOrUpdateSilenceAction } from '../../state/actions';\nimport { SilencePeriod } from './SilencePeriod';\nimport { css, cx } from '@emotion/css';\nimport { useUnifiedAlertingSelector } from '../../hooks/useUnifiedAlertingSelector';\nimport { makeAMLink } from '../../utils/misc';\nimport { useCleanup } from 'app/core/hooks/useCleanup';\nimport { parseQueryParamMatchers } from '../../utils/matchers';\nimport { matcherToMatcherField, matcherFieldToMatcher } from '../../utils/alertmanager';\nimport { useURLSearchParams } from '../../hooks/useURLSearchParams';\n\ninterface Props {\n  silence?: Silence;\n  alertManagerSourceName: string;\n}\n\nconst defaultsFromQuery = (searchParams: URLSearchParams): Partial<SilenceFormFields> => {\n  const defaults: Partial<SilenceFormFields> = {};\n\n  const comment = searchParams.get('comment');\n  const matchers = searchParams.getAll('matcher');\n\n  const formMatchers = parseQueryParamMatchers(matchers);\n  if (formMatchers.length) {\n    defaults.matchers = formMatchers.map(matcherToMatcherField);\n  }\n\n  if (comment) {\n    defaults.comment = comment;\n  }\n\n  return defaults;\n};\n\nconst getDefaultFormValues = (searchParams: URLSearchParams, silence?: Silence): SilenceFormFields => {\n  const now = new Date();\n  if (silence) {\n    const isExpired = Date.parse(silence.endsAt) < Date.now();\n    const interval = isExpired\n      ? {\n          start: now,\n          end: addDurationToDate(now, { hours: 2 }),\n        }\n      : { start: new Date(silence.startsAt), end: new Date(silence.endsAt) };\n    return {\n      id: silence.id,\n      startsAt: interval.start.toISOString(),\n      endsAt: interval.end.toISOString(),\n      comment: silence.comment,\n      createdBy: silence.createdBy,\n      duration: intervalToAbbreviatedDurationString(interval),\n      isRegex: false,\n      matchers: silence.matchers?.map(matcherToMatcherField) || [],\n      matcherName: '',\n      matcherValue: '',\n      timeZone: DefaultTimeZone,\n    };\n  } else {\n    const endsAt = addDurationToDate(now, { hours: 2 }); // Default time period is now + 2h\n    return {\n      id: '',\n      startsAt: now.toISOString(),\n      endsAt: endsAt.toISOString(),\n      comment: '',\n      createdBy: config.bootData.user.name,\n      duration: '2h',\n      isRegex: false,\n      matchers: [{ name: '', value: '', operator: MatcherOperator.equal }],\n      matcherName: '',\n      matcherValue: '',\n      timeZone: DefaultTimeZone,\n      ...defaultsFromQuery(searchParams),\n    };\n  }\n};\n\nexport const SilencesEditor: FC<Props> = ({ silence, alertManagerSourceName }) => {\n  const [urlSearchParams] = useURLSearchParams();\n\n  const defaultValues = useMemo(() => getDefaultFormValues(urlSearchParams, silence), [silence, urlSearchParams]);\n  const formAPI = useForm({ defaultValues });\n  const dispatch = useDispatch();\n  const styles = useStyles2(getStyles);\n\n  const { loading } = useUnifiedAlertingSelector((state) => state.updateSilence);\n\n  useCleanup((state) => state.unifiedAlerting.updateSilence);\n\n  const { register, handleSubmit, formState, watch, setValue, clearErrors } = formAPI;\n\n  const onSubmit = (data: SilenceFormFields) => {\n    const { id, startsAt, endsAt, comment, createdBy, matchers: matchersFields } = data;\n    const matchers = matchersFields.map(matcherFieldToMatcher);\n    const payload = pickBy(\n      {\n        id,\n        startsAt,\n        endsAt,\n        comment,\n        createdBy,\n        matchers,\n      },\n      (value) => !!value\n    ) as SilenceCreatePayload;\n    dispatch(\n      createOrUpdateSilenceAction({\n        alertManagerSourceName,\n        payload,\n        exitOnSave: true,\n        successMessage: `Silence ${payload.id ? 'updated' : 'created'}`,\n      })\n    );\n  };\n\n  const duration = watch('duration');\n  const startsAt = watch('startsAt');\n  const endsAt = watch('endsAt');\n\n  // Keep duration and endsAt in sync\n  const [prevDuration, setPrevDuration] = useState(duration);\n  useDebounce(\n    () => {\n      if (isValidDate(startsAt) && isValidDate(endsAt)) {\n        if (duration !== prevDuration) {\n          setValue('endsAt', dateTime(addDurationToDate(new Date(startsAt), parseDuration(duration))).toISOString());\n          setPrevDuration(duration);\n        } else {\n          const startValue = new Date(startsAt).valueOf();\n          const endValue = new Date(endsAt).valueOf();\n          if (endValue > startValue) {\n            const nextDuration = intervalToAbbreviatedDurationString({\n              start: new Date(startsAt),\n              end: new Date(endsAt),\n            });\n            setValue('duration', nextDuration);\n            setPrevDuration(nextDuration);\n          }\n        }\n      }\n    },\n    700,\n    [clearErrors, duration, endsAt, prevDuration, setValue, startsAt]\n  );\n\n  return (\n    <FormProvider {...formAPI}>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <FieldSet label={`${silence ? 'Recreate silence' : 'Create silence'}`}>\n          <div className={styles.flexRow}>\n            <SilencePeriod />\n            <Field\n              label=\"Duration\"\n              invalid={!!formState.errors.duration}\n              error={\n                formState.errors.duration &&\n                (formState.errors.duration.type === 'required' ? 'Required field' : formState.errors.duration.message)\n              }\n            >\n              <Input\n                className={styles.createdBy}\n                {...register('duration', {\n                  validate: (value) =>\n                    Object.keys(parseDuration(value)).length === 0\n                      ? 'Invalid duration. Valid example: 1d 4h (Available units: y, M, w, d, h, m, s)'\n                      : undefined,\n                })}\n                id=\"duration\"\n              />\n            </Field>\n          </div>\n\n          <MatchersField />\n          <Field\n            className={cx(styles.field, styles.textArea)}\n            label=\"Comment\"\n            required\n            error={formState.errors.comment?.message}\n            invalid={!!formState.errors.comment}\n          >\n            <TextArea\n              {...register('comment', { required: { value: true, message: 'Required.' } })}\n              placeholder=\"Details about the silence\"\n            />\n          </Field>\n          <Field\n            className={cx(styles.field, styles.createdBy)}\n            label=\"Created by\"\n            required\n            error={formState.errors.createdBy?.message}\n            invalid={!!formState.errors.createdBy}\n          >\n            <Input {...register('createdBy', { required: { value: true, message: 'Required.' } })} placeholder=\"User\" />\n          </Field>\n        </FieldSet>\n        <div className={styles.flexRow}>\n          {loading && (\n            <Button disabled={true} icon=\"fa fa-spinner\" variant=\"primary\">\n              Saving...\n            </Button>\n          )}\n          {!loading && <Button type=\"submit\">Submit</Button>}\n          <LinkButton\n            href={makeAMLink('alerting/silences', alertManagerSourceName)}\n            variant={'secondary'}\n            fill=\"outline\"\n          >\n            Cancel\n          </LinkButton>\n        </div>\n      </form>\n    </FormProvider>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  field: css`\n    margin: ${theme.spacing(1, 0)};\n  `,\n  textArea: css`\n    width: 600px;\n  `,\n  createdBy: css`\n    width: 200px;\n  `,\n  flexRow: css`\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n\n    & > * {\n      margin-right: ${theme.spacing(1)};\n    }\n  `,\n});\n\nexport default SilencesEditor;\n","import { useMemo } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nexport function useURLSearchParams(): [URLSearchParams] {\n  const { search } = useLocation();\n  const queryParams = useMemo(() => new URLSearchParams(search), [search]);\n  return [queryParams];\n}\n","import React, { FC, useEffect, useCallback } from 'react';\nimport { Alert, LoadingPlaceholder, withErrorBoundary } from '@grafana/ui';\n\nimport { useDispatch } from 'react-redux';\nimport { Redirect, Route, RouteChildrenProps, Switch, useLocation } from 'react-router-dom';\nimport { AlertingPageWrapper } from './components/AlertingPageWrapper';\nimport SilencesTable from './components/silences/SilencesTable';\nimport { useAlertManagerSourceName } from './hooks/useAlertManagerSourceName';\nimport { useUnifiedAlertingSelector } from './hooks/useUnifiedAlertingSelector';\nimport { fetchAmAlertsAction, fetchSilencesAction } from './state/actions';\nimport { SILENCES_POLL_INTERVAL_MS } from './utils/constants';\nimport { AsyncRequestState, initialAsyncRequestState } from './utils/redux';\nimport SilencesEditor from './components/silences/SilencesEditor';\nimport { AlertManagerPicker } from './components/AlertManagerPicker';\nimport { Silence } from 'app/plugins/datasource/alertmanager/types';\n\nconst Silences: FC = () => {\n  const [alertManagerSourceName, setAlertManagerSourceName] = useAlertManagerSourceName();\n  const dispatch = useDispatch();\n  const silences = useUnifiedAlertingSelector((state) => state.silences);\n  const alertsRequests = useUnifiedAlertingSelector((state) => state.amAlerts);\n  const alertsRequest = alertManagerSourceName\n    ? alertsRequests[alertManagerSourceName] || initialAsyncRequestState\n    : undefined;\n\n  const location = useLocation();\n  const isRoot = location.pathname.endsWith('/alerting/silences');\n\n  useEffect(() => {\n    function fetchAll() {\n      if (alertManagerSourceName) {\n        dispatch(fetchSilencesAction(alertManagerSourceName));\n        dispatch(fetchAmAlertsAction(alertManagerSourceName));\n      }\n    }\n    fetchAll();\n    const interval = setInterval(() => fetchAll, SILENCES_POLL_INTERVAL_MS);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [alertManagerSourceName, dispatch]);\n\n  const { result, loading, error }: AsyncRequestState<Silence[]> =\n    (alertManagerSourceName && silences[alertManagerSourceName]) || initialAsyncRequestState;\n\n  const getSilenceById = useCallback((id: string) => result && result.find((silence) => silence.id === id), [result]);\n\n  if (!alertManagerSourceName) {\n    return <Redirect to=\"/alerting/silences\" />;\n  }\n\n  return (\n    <AlertingPageWrapper pageId=\"silences\">\n      <AlertManagerPicker disabled={!isRoot} current={alertManagerSourceName} onChange={setAlertManagerSourceName} />\n      {error && !loading && (\n        <Alert severity=\"error\" title=\"Error loading silences\">\n          {error.message || 'Unknown error.'}\n        </Alert>\n      )}\n      {alertsRequest?.error && !alertsRequest?.loading && (\n        <Alert severity=\"error\" title=\"Error loading Alertmanager alerts\">\n          {alertsRequest.error?.message || 'Unknown error.'}\n        </Alert>\n      )}\n      {loading && <LoadingPlaceholder text=\"loading silences...\" />}\n      {result && !error && (\n        <Switch>\n          <Route exact path=\"/alerting/silences\">\n            <SilencesTable\n              silences={result}\n              alertManagerAlerts={alertsRequest?.result ?? []}\n              alertManagerSourceName={alertManagerSourceName}\n            />\n          </Route>\n          <Route exact path=\"/alerting/silence/new\">\n            <SilencesEditor alertManagerSourceName={alertManagerSourceName} />\n          </Route>\n          <Route exact path=\"/alerting/silence/:id/edit\">\n            {({ match }: RouteChildrenProps<{ id: string }>) => {\n              return (\n                match?.params.id && (\n                  <SilencesEditor\n                    silence={getSilenceById(match.params.id)}\n                    alertManagerSourceName={alertManagerSourceName}\n                  />\n                )\n              );\n            }}\n          </Route>\n        </Switch>\n      )}\n    </AlertingPageWrapper>\n  );\n};\n\nexport default withErrorBoundary(Silences, { style: 'page' });\n","import React, { FC } from 'react';\nimport Page from 'app/core/components/Page/Page';\nimport { getNavModel } from 'app/core/selectors/navModel';\nimport { useSelector } from 'react-redux';\nimport { StoreState } from 'app/types/store';\n\ninterface Props {\n  pageId: string;\n  isLoading?: boolean;\n}\n\nexport const AlertingPageWrapper: FC<Props> = ({ children, pageId, isLoading }) => {\n  const navModel = getNavModel(\n    useSelector((state: StoreState) => state.navIndex),\n    pageId\n  );\n\n  return (\n    <Page navModel={navModel}>\n      <Page.Contents isLoading={isLoading}>{children}</Page.Contents>\n    </Page>\n  );\n};\n","import React, { ReactNode, useState } from 'react';\nimport { css, cx } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { IconButton, useStyles2 } from '@grafana/ui';\n\nexport interface DynamicTableColumnProps<T = unknown> {\n  id: string | number;\n  label: string;\n\n  renderCell: (item: DynamicTableItemProps<T>, index: number) => ReactNode;\n  size?: number | string;\n}\n\nexport interface DynamicTableItemProps<T = unknown> {\n  id: string | number;\n  data: T;\n  renderExpandedContent?: () => ReactNode;\n}\n\nexport interface DynamicTableProps<T = unknown> {\n  cols: Array<DynamicTableColumnProps<T>>;\n  items: Array<DynamicTableItemProps<T>>;\n\n  isExpandable?: boolean;\n\n  // provide these to manually control expanded status\n  onCollapse?: (item: DynamicTableItemProps<T>) => void;\n  onExpand?: (item: DynamicTableItemProps<T>) => void;\n  isExpanded?: (item: DynamicTableItemProps<T>) => boolean;\n\n  renderExpandedContent?: (\n    item: DynamicTableItemProps<T>,\n    index: number,\n    items: Array<DynamicTableItemProps<T>>\n  ) => ReactNode;\n  testIdGenerator?: (item: DynamicTableItemProps<T>, index: number) => string;\n  renderPrefixHeader?: () => ReactNode;\n  renderPrefixCell?: (\n    item: DynamicTableItemProps<T>,\n    index: number,\n    items: Array<DynamicTableItemProps<T>>\n  ) => ReactNode;\n}\n\nexport const DynamicTable = <T extends object>({\n  cols,\n  items,\n  isExpandable = false,\n  onCollapse,\n  onExpand,\n  isExpanded,\n  renderExpandedContent,\n  testIdGenerator,\n\n  // render a cell BEFORE expand icon for header/ each row.\n  // currently use by RuleList to render guidelines\n  renderPrefixCell,\n  renderPrefixHeader,\n}: DynamicTableProps<T>) => {\n  if ((onCollapse || onExpand || isExpanded) && !(onCollapse && onExpand && isExpanded)) {\n    throw new Error('either all of onCollapse, onExpand, isExpanded must be provided, or none');\n  }\n  if ((isExpandable || renderExpandedContent) && !(isExpandable && renderExpandedContent)) {\n    throw new Error('either both isExpanded and renderExpandedContent must be provided, or neither');\n  }\n  const styles = useStyles2(getStyles(cols, isExpandable, !!renderPrefixHeader));\n\n  const [expandedIds, setExpandedIds] = useState<Array<DynamicTableItemProps['id']>>([]);\n\n  const toggleExpanded = (item: DynamicTableItemProps<T>) => {\n    if (isExpanded && onCollapse && onExpand) {\n      isExpanded(item) ? onCollapse(item) : onExpand(item);\n    } else {\n      setExpandedIds(\n        expandedIds.includes(item.id) ? expandedIds.filter((itemId) => itemId !== item.id) : [...expandedIds, item.id]\n      );\n    }\n  };\n  return (\n    <div className={styles.container} data-testid=\"dynamic-table\">\n      <div className={styles.row} data-testid=\"header\">\n        {renderPrefixHeader && renderPrefixHeader()}\n        {isExpandable && <div className={styles.cell} />}\n        {cols.map((col) => (\n          <div className={styles.cell} key={col.id}>\n            {col.label}\n          </div>\n        ))}\n      </div>\n\n      {items.map((item, index) => {\n        const isItemExpanded = isExpanded ? isExpanded(item) : expandedIds.includes(item.id);\n        return (\n          <div className={styles.row} key={item.id} data-testid={testIdGenerator?.(item, index) ?? 'row'}>\n            {renderPrefixCell && renderPrefixCell(item, index, items)}\n            {isExpandable && (\n              <div className={cx(styles.cell, styles.expandCell)}>\n                <IconButton\n                  aria-label={`${isItemExpanded ? 'Collapse' : 'Expand'} row`}\n                  size=\"xl\"\n                  data-testid=\"collapse-toggle\"\n                  className={styles.expandButton}\n                  name={isItemExpanded ? 'angle-down' : 'angle-right'}\n                  onClick={() => toggleExpanded(item)}\n                  type=\"button\"\n                />\n              </div>\n            )}\n            {cols.map((col) => (\n              <div className={cx(styles.cell, styles.bodyCell)} data-column={col.label} key={`${item.id}-${col.id}`}>\n                {col.renderCell(item, index)}\n              </div>\n            ))}\n            {isItemExpanded && renderExpandedContent && (\n              <div className={styles.expandedContentRow} data-testid=\"expanded-content\">\n                {renderExpandedContent(item, index, items)}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nconst getStyles = <T extends unknown>(\n  cols: Array<DynamicTableColumnProps<T>>,\n  isExpandable: boolean,\n  hasPrefixCell: boolean\n) => {\n  const sizes = cols.map((col) => {\n    if (!col.size) {\n      return 'auto';\n    }\n\n    if (typeof col.size === 'number') {\n      return `${col.size}fr`;\n    }\n\n    return col.size;\n  });\n\n  if (isExpandable) {\n    sizes.unshift('calc(1em + 16px)');\n  }\n\n  if (hasPrefixCell) {\n    sizes.unshift('0');\n  }\n\n  return (theme: GrafanaTheme2) => ({\n    container: css`\n      border: 1px solid ${theme.colors.border.strong};\n      border-radius: 2px;\n      color: ${theme.colors.text.secondary};\n    `,\n    row: css`\n      display: grid;\n      grid-template-columns: ${sizes.join(' ')};\n      grid-template-rows: 1fr auto;\n\n      &:nth-child(2n + 1) {\n        background-color: ${theme.colors.background.secondary};\n      }\n\n      &:nth-child(2n) {\n        background-color: ${theme.colors.background.primary};\n      }\n\n      ${theme.breakpoints.down('sm')} {\n        grid-template-columns: auto 1fr;\n        grid-template-areas: 'left right';\n        padding: 0 ${theme.spacing(0.5)};\n\n        &:first-child {\n          display: none;\n        }\n\n        ${hasPrefixCell\n          ? `\n            & > *:first-child {\n              display: none;\n            }\n          `\n          : ''}\n      }\n    `,\n    cell: css`\n      align-items: center;\n      padding: ${theme.spacing(1)};\n\n      ${theme.breakpoints.down('sm')} {\n        padding: ${theme.spacing(1)} 0;\n        grid-template-columns: 1fr;\n      }\n    `,\n    bodyCell: css`\n      overflow: hidden;\n      word-break: break-all;\n      ${theme.breakpoints.down('sm')} {\n        grid-column-end: right;\n        grid-column-start: right;\n\n        &::before {\n          content: attr(data-column);\n          display: block;\n          color: ${theme.colors.text.primary};\n        }\n      }\n    `,\n    expandCell: css`\n      justify-content: center;\n\n      ${theme.breakpoints.down('sm')} {\n        align-items: start;\n        grid-area: left;\n      }\n    `,\n    expandedContentRow: css`\n      grid-column-end: ${sizes.length + 1};\n      grid-column-start: ${hasPrefixCell ? 3 : 2};\n      grid-row: 2;\n      padding: 0 ${theme.spacing(3)} 0 ${theme.spacing(1)};\n      position: relative;\n\n      ${theme.breakpoints.down('sm')} {\n        grid-column-start: 2;\n        border-top: 1px solid ${theme.colors.border.strong};\n        grid-row: auto;\n        padding: ${theme.spacing(1)} 0 0 0;\n      }\n    `,\n    expandButton: css`\n      margin-right: 0;\n      display: block;\n    `,\n  });\n};\n","import { Icon, IconName, useStyles, Tooltip } from '@grafana/ui';\nimport { PopoverContent } from '@grafana/ui/src/components/Tooltip/Tooltip';\nimport { TooltipPlacement } from '@grafana/ui/src/components/Tooltip/PopoverController';\nimport React, { FC } from 'react';\nimport { css, cx } from '@emotion/css';\nimport { Link } from 'react-router-dom';\n\ninterface Props {\n  tooltip: PopoverContent;\n  icon: IconName;\n\n  className?: string;\n  tooltipPlacement?: TooltipPlacement;\n  to?: string;\n  target?: string;\n  onClick?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  'data-testid'?: string;\n}\n\nexport const ActionIcon: FC<Props> = ({\n  tooltip,\n  icon,\n  to,\n  target,\n  onClick,\n  className,\n  tooltipPlacement = 'top',\n  ...rest\n}) => {\n  const iconEl = (\n    <Icon role=\"button\" className={cx(useStyles(getStyle), className)} onClick={onClick} name={icon} {...rest} />\n  );\n\n  const ariaLabel = typeof tooltip === 'string' ? tooltip : undefined;\n  return (\n    <Tooltip content={tooltip} placement={tooltipPlacement}>\n      {to ? (\n        <GoTo url={to} label={ariaLabel} target={target}>\n          {iconEl}\n        </GoTo>\n      ) : (\n        iconEl\n      )}\n    </Tooltip>\n  );\n};\n\ninterface GoToProps {\n  url: string;\n  label?: string;\n  target?: string;\n}\n\nconst GoTo: FC<GoToProps> = ({ url, label, target, children }) => {\n  const absoluteUrl = url?.startsWith('http');\n\n  return absoluteUrl ? (\n    <a aria-label={label} href={url} target={target}>\n      {children}\n    </a>\n  ) : (\n    <Link aria-label={label} to={url} target={target}>\n      {children}\n    </Link>\n  );\n};\n\nexport const getStyle = () => css`\n  cursor: pointer;\n`;\n","import { AlertState } from 'app/plugins/datasource/alertmanager/types';\nimport React, { FC } from 'react';\nimport { State, StateTag } from '../StateTag';\n\nconst alertStateToState: Record<AlertState, State> = {\n  [AlertState.Active]: 'bad',\n  [AlertState.Unprocessed]: 'neutral',\n  [AlertState.Suppressed]: 'info',\n};\n\ninterface Props {\n  state: AlertState;\n}\n\nexport const AmAlertStateTag: FC<Props> = ({ state }) => <StateTag state={alertStateToState[state]}>{state}</StateTag>;\n","import React, { useCallback } from 'react';\nimport { GrafanaTheme } from '@grafana/data';\nimport { useStyles } from '@grafana/ui';\nimport { css } from '@emotion/css';\nimport { Matcher } from 'app/plugins/datasource/alertmanager/types';\nimport { AlertLabel } from '../AlertLabel';\nimport { matcherToOperator } from '../../utils/alertmanager';\n\ntype MatchersProps = { matchers: Matcher[]; onRemoveLabel?(index: number): void };\n\nexport const Matchers = ({ matchers, onRemoveLabel }: MatchersProps) => {\n  const styles = useStyles(getStyles);\n\n  const removeLabel = useCallback(\n    (index: number) => {\n      if (!!onRemoveLabel) {\n        onRemoveLabel(index);\n      }\n    },\n    [onRemoveLabel]\n  );\n\n  return (\n    <div className={styles.wrapper}>\n      {matchers.map((matcher, index) => {\n        const { name, value } = matcher;\n        return (\n          <AlertLabel\n            key={`${name}-${value}-${index}`}\n            labelKey={name}\n            value={value}\n            operator={matcherToOperator(matcher)}\n            onRemoveLabel={!!onRemoveLabel ? () => removeLabel(index) : undefined}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme) => ({\n  wrapper: css`\n    & > * {\n      margin-top: ${theme.spacing.xs};\n      margin-right: ${theme.spacing.xs};\n    }\n    padding-bottom: ${theme.spacing.xs};\n  `,\n});\n","import { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport store from 'app/core/store';\nimport { useCallback } from 'react';\nimport { ALERTMANAGER_NAME_LOCAL_STORAGE_KEY, ALERTMANAGER_NAME_QUERY_KEY } from '../utils/constants';\nimport { getAlertManagerDataSources, GRAFANA_RULES_SOURCE_NAME } from '../utils/datasource';\n\nfunction isAlertManagerSource(alertManagerSourceName: string): boolean {\n  return (\n    alertManagerSourceName === GRAFANA_RULES_SOURCE_NAME ||\n    !!getAlertManagerDataSources().find((ds) => ds.name === alertManagerSourceName)\n  );\n}\n\n/* this will return am name either from query params or from local storage or a default (grafana).\n *\n * fallbackUrl - if provided, will redirect to this url if alertmanager provided in query no longer\n */\nexport function useAlertManagerSourceName(): [string | undefined, (alertManagerSourceName: string) => void] {\n  const [queryParams, updateQueryParams] = useQueryParams();\n\n  const update = useCallback(\n    (alertManagerSourceName: string) => {\n      if (!isAlertManagerSource(alertManagerSourceName)) {\n        return;\n      }\n      if (alertManagerSourceName === GRAFANA_RULES_SOURCE_NAME) {\n        store.delete(ALERTMANAGER_NAME_LOCAL_STORAGE_KEY);\n        updateQueryParams({ [ALERTMANAGER_NAME_QUERY_KEY]: null });\n      } else {\n        store.set(ALERTMANAGER_NAME_LOCAL_STORAGE_KEY, alertManagerSourceName);\n        updateQueryParams({ [ALERTMANAGER_NAME_QUERY_KEY]: alertManagerSourceName });\n      }\n    },\n    [updateQueryParams]\n  );\n\n  const querySource = queryParams[ALERTMANAGER_NAME_QUERY_KEY];\n\n  if (querySource && typeof querySource === 'string') {\n    if (isAlertManagerSource(querySource)) {\n      return [querySource, update];\n    } else {\n      // non existing alertmanager\n      return [undefined, update];\n    }\n  }\n  const storeSource = store.get(ALERTMANAGER_NAME_LOCAL_STORAGE_KEY);\n  if (storeSource && typeof storeSource === 'string' && isAlertManagerSource(storeSource)) {\n    update(storeSource);\n    return [storeSource, update];\n  }\n\n  return [GRAFANA_RULES_SOURCE_NAME, update];\n}\n","import { GrafanaTheme2 } from '@grafana/data';\nimport { css } from '@emotion/css';\n\nexport const getAlertTableStyles = (theme: GrafanaTheme2) => ({\n  table: css`\n    width: 100%;\n    border-radius: ${theme.shape.borderRadius()};\n    border: solid 1px ${theme.colors.border.weak};\n    background-color: ${theme.colors.background.secondary};\n\n    th {\n      padding: ${theme.spacing(1)};\n    }\n\n    td {\n      padding: 0 ${theme.spacing(1)};\n    }\n\n    tr {\n      height: 38px;\n    }\n  `,\n  evenRow: css`\n    background-color: ${theme.colors.background.primary};\n  `,\n  colExpand: css`\n    width: 36px;\n  `,\n  actionsCell: css`\n    text-align: right;\n    width: 1%;\n    white-space: nowrap;\n\n    & > * + * {\n      margin-left: ${theme.spacing(1)};\n    }\n  `,\n});\n"],"names":["useCleanup","stateSelector","dispatch","useDispatch","selectorRef","useRef","current","useEffect","cleanUpAction","useQueryParams","search","useLocation","useMemo","locationSearchToObject","useCallback","values","replace","setImmediate","locationService","NoSilencesSplash","alertManagerSourceName","contextSrv","EmptyListCTA","title","buttonIcon","buttonLink","makeAMLink","buttonTitle","CallToActionCard","callToActionElement","message","stateOptions","Object","entries","SilenceState","map","key","value","label","SilencesFilter","queryStringKey","setQueryStringKey","useState","Math","random","queryParams","setQueryParams","queryString","silenceState","getSilenceFiltersFromUrlParams","styles","useStyles2","getStyles","handleQueryStringChange","debounce","e","target","inputInvalid","length","parseMatchers","className","flexRow","Field","rowChild","fieldLabel","Tooltip","content","Icon","name","invalid","error","Input","searchInput","prefix","onChange","defaultValue","placeholder","Label","RadioButtonGroup","options","state","Button","variant","icon","onClick","setTimeout","theme","css","spacing","colors","border","strong","silenceStateToState","SilenceStateTag","StateTag","ActionButton","restProps","size","cx","useStyles","getStyle","typography","sm","SilencedAlertsTableRow","alert","isCollapsed","setIsCollapsed","duration","intervalToAbbreviatedDurationString","start","Date","startsAt","end","endsAt","alertName","labels","reduce","labelKey","labelValue","CollapseToggle","onToggle","collapsed","AmAlertStateTag","status","colSpan","AlertLabels","tableMargin","colState","colName","silencedAlerts","tableStyles","getAlertTableStyles","table","colExpand","index","evenRow","fingerprint","SilenceDetails","silence","comment","createdBy","dateDisplayFormat","startsAtDate","dateMath","endsAtDate","container","format","text","primary","row","useFilteredSilences","silences","silenceIdsString","silenceIds","filter","split","includes","id","every","matcher","matchers","some","isEqual","isRegex","topButtonContainer","addNewSilence","callout","background","secondary","info","calloutIcon","editButton","alertManagerAlerts","filteredSilences","showExpiredSilencesBanner","undefined","columns","handleExpireSilenceClick","expireSilenceAction","renderCell","data","Matchers","push","Link","href","ActionIcon","A","to","tooltip","useColumns","items","silencedBy","DynamicTable","cols","isExpandable","renderExpandedContent","wrapper","removeButton","matcherOptions","formApi","useFormContext","control","register","formState","errors","fields","append","remove","useFieldArray","required","InputControl","render","field","Select","menuShouldPortal","matcherFieldOptions","operator","rules","IconButton","type","newMatcher","MatcherOperator","SilencePeriod","getValues","onChangeStartsAt","fieldState","startsAtInvalid","useController","validate","onChangeEndsAt","endsAtInvalid","onChangeTimeZone","timeZone","from","dateTime","timeRange","TimeRangeInput","raw","newValue","hideTimeZone","hideQuickRanges","getDefaultFormValues","searchParams","now","interval","parse","addDurationToDate","hours","toISOString","matcherToMatcherField","matcherName","matcherValue","DefaultTimeZone","config","defaults","get","getAll","formMatchers","parseQueryParamMatchers","defaultsFromQuery","textArea","urlSearchParams","URLSearchParams","useURLSearchParams","defaultValues","formAPI","useForm","loading","useUnifiedAlertingSelector","updateSilence","unifiedAlerting","handleSubmit","watch","setValue","clearErrors","prevDuration","setPrevDuration","useDebounce","isValidDate","parseDuration","startValue","valueOf","nextDuration","onSubmit","matchersFields","matcherFieldToMatcher","payload","pickBy","createOrUpdateSilenceAction","exitOnSave","successMessage","FieldSet","keys","TextArea","disabled","LinkButton","fill","withErrorBoundary","setAlertManagerSourceName","useAlertManagerSourceName","alertsRequests","amAlerts","alertsRequest","initialAsyncRequestState","isRoot","pathname","endsWith","fetchAll","fetchSilencesAction","fetchAmAlertsAction","setInterval","SILENCES_POLL_INTERVAL_MS","clearInterval","result","getSilenceById","find","AlertingPageWrapper","pageId","AlertManagerPicker","Alert","severity","LoadingPlaceholder","exact","path","match","params","style","children","isLoading","navModel","getNavModel","useSelector","navIndex","onCollapse","onExpand","isExpanded","testIdGenerator","renderPrefixCell","renderPrefixHeader","Error","expandedIds","setExpandedIds","cell","col","item","isItemExpanded","expandCell","expandButton","itemId","toggleExpanded","bodyCell","expandedContentRow","hasPrefixCell","sizes","unshift","join","breakpoints","down","tooltipPlacement","rest","iconEl","role","ariaLabel","placement","GoTo","url","startsWith","alertStateToState","AlertState","onRemoveLabel","removeLabel","matcherToOperator","xs","isAlertManagerSource","GRAFANA_RULES_SOURCE_NAME","getAlertManagerDataSources","ds","updateQueryParams","update","store","ALERTMANAGER_NAME_LOCAL_STORAGE_KEY","ALERTMANAGER_NAME_QUERY_KEY","querySource","storeSource","shape","borderRadius","weak","actionsCell"],"sourceRoot":""}