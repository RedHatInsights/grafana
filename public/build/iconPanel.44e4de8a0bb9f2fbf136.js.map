{"version":3,"file":"iconPanel.44e4de8a0bb9f2fbf136.js","mappings":"0qBAmBO,MAAMA,UAAkBC,EAAAA,UAG7BC,YAAYC,GACVC,MAAMD,GADkB,+CAKXA,IACbE,KAAKC,QAAU,IAAIC,EAAAA,EAAaC,EAAAA,EAAUL,EAAMM,QAAQC,MACxDL,KAAKM,WAAWR,GAChBE,KAAKC,QAAQM,WAAWP,KAAKQ,MACtBR,KAAKC,WATY,qBAYZH,IACZ,MAAM,MAAEW,EAAF,OAASC,GAAWZ,EAC1BE,KAAKC,QAAQU,OAAS,CACpBC,KAAK,EACLC,MAAM,GAERb,KAAKC,QAAQa,UAAY,CACvBD,KAAM,EACND,IAAK,EACLH,MAAAA,EACAC,OAAAA,GAEFV,KAAKC,QAAQK,WAAWG,EAAOC,MAxBP,cA2BD,CACvBK,SAAWC,IAAgCC,EAAAA,EAAAA,IAA0BjB,KAAKF,MAAMoB,KAAMF,GACtFG,SAAWC,IAAgCC,EAAAA,EAAAA,IAA0BrB,KAAKF,MAAMoB,KAAME,GACtFE,QAAUC,IAA8BC,EAAAA,EAAAA,IAAyBxB,KAAKF,MAAMoB,KAAMK,GAClFE,YAAcC,IAAiCC,EAAAA,EAAAA,IAA6B3B,KAAKF,MAAMoB,KAAMQ,KA7B7F1B,KAAKC,QAAUD,KAAK4B,YAAY9B,GAgClC+B,sBAAsBC,GAAkB,QACtC,MAAM,MAAErB,EAAF,OAASC,EAAT,KAAiBQ,GAASlB,KAAKF,MACrC,IAAIiC,GAAU,EAgBd,OAdItB,IAAUqB,EAAUrB,OAASC,IAAWoB,EAAUpB,SACpDV,KAAKM,WAAWwB,GAChBC,GAAU,GAERb,IAASY,EAAUZ,OACrBlB,KAAKC,QAAQM,WAAWP,KAAKQ,MAC7BuB,GAAU,IAIR,UAAA/B,KAAKF,MAAMM,eAAX,eAAoBC,SAApB,UAA6ByB,EAAU1B,eAAvC,aAA6B,EAAmBC,QAClDL,KAAK4B,YAAYE,GACjBC,GAAU,GAELA,EAGTC,SACE,MAAM,MAAEvB,EAAF,OAASC,GAAWV,KAAKF,MAC/B,OAAO,gBAAKmC,MAAO,CAAExB,MAAAA,EAAOC,OAAAA,EAAQwB,SAAU,SAAUC,SAAU,YAA3D,SAA0EnC,KAAKC,QAAQ+B,YClE3F,MAAMI,EAAoC,CAC/C/B,KAAM,CACJgC,OAAQ,CACNC,KAAM,CACJC,KAAMC,EAAAA,GAAAA,MACNC,MAAO,qC,+DCVR,MAAMC,EAAS,IAAIC,EAAAA,YAA0BhD,GACjDiD,eACAC,iBACAC,iBAAiBC,IAChBA,EAAQC,iBAAmD,CACzDC,SAAU,CAAC,QACXX,KAAM,OAGNY,MAAO,CAACH,EAASI,KACfhD,EAAAA,EAAAA,kBAA4B4C,EAASI,GAErCC,EAAAA,EAAAA,cAA4BL,EAASI,GACrCC,EAAAA,EAAAA,UAAwBL,EAASI,IAGnCE,aAAcjB,EAAoB/B","sources":["webpack://grafana/./public/app/plugins/panel/icon/IconPanel.tsx","webpack://grafana/./public/app/plugins/panel/icon/models.gen.ts","webpack://grafana/./public/app/plugins/panel/icon/module.tsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { PanelProps } from '@grafana/data';\nimport { PanelOptions } from './models.gen';\nimport { ElementState } from 'app/features/canvas/runtime/element';\nimport { iconItem } from 'app/features/canvas/elements/icon';\nimport {\n  ColorDimensionConfig,\n  DimensionContext,\n  getColorDimensionFromData,\n  getResourceDimensionFromData,\n  getScaleDimensionFromData,\n  getTextDimensionFromData,\n  ResourceDimensionConfig,\n  ScaleDimensionConfig,\n  TextDimensionConfig,\n} from 'app/features/dimensions';\n\ninterface Props extends PanelProps<PanelOptions> {}\n\nexport class IconPanel extends Component<Props> {\n  private element: ElementState;\n\n  constructor(props: Props) {\n    super(props);\n    this.element = this.initElement(props);\n  }\n\n  initElement = (props: Props) => {\n    this.element = new ElementState(iconItem, props.options.root as any);\n    this.updateSize(props);\n    this.element.updateData(this.dims);\n    return this.element;\n  };\n\n  updateSize = (props: Props) => {\n    const { width, height } = props;\n    this.element.anchor = {\n      top: true,\n      left: true,\n    };\n    this.element.placement = {\n      left: 0,\n      top: 0,\n      width,\n      height,\n    };\n    this.element.updateSize(width, height);\n  };\n\n  dims: DimensionContext = {\n    getColor: (color: ColorDimensionConfig) => getColorDimensionFromData(this.props.data, color),\n    getScale: (scale: ScaleDimensionConfig) => getScaleDimensionFromData(this.props.data, scale),\n    getText: (text: TextDimensionConfig) => getTextDimensionFromData(this.props.data, text),\n    getResource: (res: ResourceDimensionConfig) => getResourceDimensionFromData(this.props.data, res),\n  };\n\n  shouldComponentUpdate(nextProps: Props) {\n    const { width, height, data } = this.props;\n    let changed = false;\n\n    if (width !== nextProps.width || height !== nextProps.height) {\n      this.updateSize(nextProps);\n      changed = true;\n    }\n    if (data !== nextProps.data) {\n      this.element.updateData(this.dims);\n      changed = true;\n    }\n\n    // Reload the element when options change\n    if (this.props.options?.root !== nextProps.options?.root) {\n      this.initElement(nextProps);\n      changed = true;\n    }\n    return changed;\n  }\n\n  render() {\n    const { width, height } = this.props;\n    return <div style={{ width, height, overflow: 'hidden', position: 'relative' }}>{this.element.render()}</div>;\n  }\n}\n","//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n// NOTE: This file will be auto generated from models.cue\n// It is currenty hand written but will serve as the target for cuetsy\n//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nimport { CanvasElementOptions } from 'app/features/canvas';\nimport { IconConfig } from 'app/features/canvas/elements/icon';\nimport { ResourceDimensionMode } from 'app/features/dimensions';\n\nexport interface PanelOptions {\n  root: Omit<CanvasElementOptions<IconConfig>, 'type' | 'name'>; // type is forced\n}\n\nexport const defaultPanelOptions: PanelOptions = {\n  root: {\n    config: {\n      path: {\n        mode: ResourceDimensionMode.Fixed,\n        fixed: 'img/icons/unicons/analysis.svg',\n      },\n    },\n  },\n};\n","import { PanelPlugin } from '@grafana/data';\n\nimport { IconPanel } from './IconPanel';\nimport { defaultPanelOptions, PanelOptions } from './models.gen';\nimport { IconConfig, iconItem } from 'app/features/canvas/elements/icon';\nimport { optionBuilder } from '../canvas/editor/options';\nimport { CanvasElementOptions } from 'app/features/canvas';\n\nexport const plugin = new PanelPlugin<PanelOptions>(IconPanel)\n  .setNoPadding() // extend to panel edges\n  .useFieldConfig()\n  .setPanelOptions((builder) => {\n    builder.addNestedOptions<CanvasElementOptions<IconConfig>>({\n      category: ['Icon'],\n      path: 'root',\n\n      // Dynamically fill the selected element\n      build: (builder, ctx) => {\n        iconItem.registerOptionsUI!(builder, ctx);\n\n        optionBuilder.addBackground(builder, ctx);\n        optionBuilder.addBorder(builder, ctx);\n      },\n\n      defaultValue: defaultPanelOptions.root as any,\n    });\n  });\n"],"names":["IconPanel","Component","constructor","props","super","this","element","ElementState","iconItem","options","root","updateSize","updateData","dims","width","height","anchor","top","left","placement","getColor","color","getColorDimensionFromData","data","getScale","scale","getScaleDimensionFromData","getText","text","getTextDimensionFromData","getResource","res","getResourceDimensionFromData","initElement","shouldComponentUpdate","nextProps","changed","render","style","overflow","position","defaultPanelOptions","config","path","mode","ResourceDimensionMode","fixed","plugin","PanelPlugin","setNoPadding","useFieldConfig","setPanelOptions","builder","addNestedOptions","category","build","ctx","optionBuilder","defaultValue"],"sourceRoot":""}